import{u as e,w as a,C as l,x as o,q as n,v as s,m as d,a as r}from"./vendor-element-plus-CAbZ6VM0.js";import{r as t}from"./request-C2d-pRYf.js";import{u}from"./danmaku-HSbRWeUS.js";import{q as i,r as m,ab as p,_,K as f,v as c,L as g,M as v,V,S as b,O as y}from"./vendor-libs-DUytVOgY.js";import"./vendor-vue-BEIf0qVf.js";import"./vendor-exceljs-BzIpynsW.js";const h=i({__name:"dyTab",setup(i){const h=m(),x=m(!1),j=m(!1),w=p({id:0,room_id:0,sing_prefix:"点歌",sing_cd:0,fans_level:1}),U=u(),k=()=>{"number"!=typeof w.room_id||w.room_id<1?r.warning("请输入正确的房间号"):0!=w.sing_prefix.length?"number"!=typeof w.sing_cd||w.sing_cd<0?r.warning("请输入正确的点歌cd"):"number"!=typeof w.fans_level||w.fans_level<0?r.warning("请输入正确的粉团等级"):(x.value=!0,t.addOrUpdateDyConfig({data:w}).then(e=>{const a=e.data;0!=a.code?r.warning(a.msg):(r.success(a.msg),w.id=a.data,U.clearDanmakuList()),x.value=!1}).catch(e=>{r.error(e),x.value=!1})):r.warning("请输入正确的点歌指令")};return _(()=>{j.value=!0,t.getDyConfig({}).then(e=>{const a=e.data;if(0!=a.code)r.warning(a.msg);else{if(!a.data.data)return void(j.value=!1);Object.assign(w,a.data.data)}j.value=!1}).catch(e=>{r.error(e),j.value=!1})}),(r,t)=>{const u=l,i=a,m=o,p=n,_=e,U=d,C=s;return c(),f(U,null,{header:g(()=>[...t[4]||(t[4]=[y("div",{class:"card-header"},[y("span",null,"抖音设置")],-1)])]),default:g(()=>[v((c(),f(_,{mode:w,ref_key:"refForm",ref:h,"label-width":"auto"},{default:g(()=>[V(i,{label:"房间号",prop:"room_id"},{default:g(()=>[V(u,{modelValue:w.room_id,"onUpdate:modelValue":t[0]||(t[0]=e=>w.room_id=e),min:1,controls:!1},null,8,["modelValue"])]),_:1}),V(i,{label:"点歌指令",prop:"sing_prefix"},{default:g(()=>[V(m,{modelValue:w.sing_prefix,"onUpdate:modelValue":t[1]||(t[1]=e=>w.sing_prefix=e),type:"text",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),V(i,{label:"点歌cd",prop:"sing_cd"},{default:g(()=>[V(u,{modelValue:w.sing_cd,"onUpdate:modelValue":t[2]||(t[2]=e=>w.sing_cd=e),placeholder:"点歌cd，单位：秒",min:0,controls:!1},null,8,["modelValue"])]),_:1}),V(i,{label:"粉团等级",prop:"fans_level"},{default:g(()=>[V(u,{modelValue:w.fans_level,"onUpdate:modelValue":t[3]||(t[3]=e=>w.fans_level=e),min:0,controls:!1},null,8,["modelValue"])]),_:1}),V(i,null,{default:g(()=>[v((c(),f(p,{type:"primary",onClick:k},{default:g(()=>[...t[5]||(t[5]=[b("保存",-1)])]),_:1})),[[C,x.value]])]),_:1})]),_:1},8,["mode"])),[[C,j.value]])]),_:1})}}});export{h as default};
