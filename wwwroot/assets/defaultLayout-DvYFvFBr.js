import{a as e,b as a,c as t,d as l,e as o,f as n,g as s,h as i,z as d,i as r,j as c,k as u,l as m}from"./vendor-element-plus-CAbZ6VM0.js";import{R as p}from"./vendor-vue-BEIf0qVf.js";import{t as f,c as v,r as _,a as g,p as h}from"./index-NUBkmFdY.js";import{q as b,ab as k,r as w,c as y,_ as x,K as C,L as T,V as j,u as S,bE as R,S as V,bF as I,bG as D,B as E,bH as H,bI as L,a9 as $,bJ as G,R as M,a3 as O,v as U,bD as q}from"./vendor-libs-DUytVOgY.js";import{r as z}from"./request-C2d-pRYf.js";import"./vendor-exceljs-BzIpynsW.js";import{u as A}from"./interval-pHlrBWSF.js";import{u as F}from"./theme-Dou73O16.js";const B=((e,a)=>{const t=e.__vccOpts||e;for(const[l,o]of a)t[l]=o;return t})(b({__name:"defaultLayout",setup(b){const B=A(),J=F(),K={shadow:"always"},W={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},N={offset:70,plain:!0},P=k({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1}),Q=w(!1),X=w(),Y=w(),Z=w(),ee=w(),ae=()=>{P.navSideTour=!0,le(),Q.value=!1},te=async()=>{await O(),P.navSideTour||(P.navSideTour=!0,le(),Q.value=!1)},le=()=>{z.addOrUpdateGlobalConfig({data:P}).then(a=>{const t=a.data;0!=t.code?e.warning(t.msg||"保存失败"):P.id=t.data}).catch(a=>{e.error(a)})},oe=e=>{if(_.currentRoute.value.name==e)return P.collapse=!P.collapse,void le();_.push({name:e})},ne=async a=>{a.preventDefault();const t=window.getSelection()?.toString(),l=document.activeElement,o=l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement,n=await window.pywebview.api.is_bundle();let s=!1;const i=await window.pywebview.api.check_clipboard();i&&i.length>0&&(s=!0);const d=[{label:"拷贝",disabled:!t,onClick:()=>{t&&(g(t),e.success("拷贝成功"))}},{label:"粘贴",disabled:!o||!s,onClick:()=>{h(l)}}];n||d.push({label:"重新加载",disabled:!1,onClick:()=>{B.clearAllIntervals(),window.pywebview.api.reload()}}),q.showContextMenu({x:a.x,y:a.y,theme:re.value?"mac dark":"mac",zIndex:100,minWidth:230,items:d})},se=()=>{P.dark_mode=!P.dark_mode,le(),f(P.dark_mode),J.setDarkTheme(P.dark_mode)},ie=y(()=>({left:P.collapse?"64px":"200px"})),de=y(()=>({width:P.collapse?"64px":"200px"})),re=y(()=>J.getDarkTheme());return x(()=>{setTimeout(()=>{(async()=>{z.getGlobalConfig({}).then(a=>{const t=a.data;if(0!=t.code)e.warning(t.msg);else{const e=t.data.data;e?(Object.assign(P,e),f(e.dark_mode),J.setDarkTheme(e.dark_mode),e.check_update&&(v(),B.addInterval("check_update",v,216e5)),e.navSideTour||(Q.value=!0)):Q.value=!0}}).catch(a=>{e.error(a)})})()},1e3)}),(e,f)=>{const v=o,_=l,g=n,h=t,b=s,k=r,w=u,y=c,x=i,O=m,q=a;return U(),C(q,{class:"layout-container-demo"},{default:T(()=>[j(b,{style:$(de.value)},{default:T(()=>[j(h,{"default-active":"0",collapse:P.collapse,class:"layout-aside-menu"},{default:T(()=>[j(_,{index:"0",onClick:f[0]||(f[0]=e=>oe("home")),ref_key:"homeRef",ref:X},{title:T(()=>[...f[6]||(f[6]=[V("点歌板",-1)])]),default:T(()=>[j(v,null,{default:T(()=>[j(S(R))]),_:1})]),_:1},512),j(_,{index:"1",onClick:f[1]||(f[1]=e=>oe("settings")),ref_key:"settingsRef",ref:Y},{title:T(()=>[...f[7]||(f[7]=[V("设置",-1)])]),default:T(()=>[j(v,null,{default:T(()=>[j(S(I))]),_:1})]),_:1},512),j(_,{index:"2",onClick:f[2]||(f[2]=e=>oe("changelog"))},{title:T(()=>[...f[8]||(f[8]=[V("更新日志",-1)])]),default:T(()=>[j(v,null,{default:T(()=>[j(S(D))]),_:1})]),_:1}),j(_,{index:"3",onClick:f[3]||(f[3]=e=>oe("about"))},{title:T(()=>[...f[9]||(f[9]=[V("关于",-1)])]),default:T(()=>[j(v,null,{default:T(()=>[j(S(E))]),_:1})]),_:1}),j(_,{index:"4",ref_key:"themeRef",ref:Z},{default:T(()=>[j(g,{modelValue:re.value,"onUpdate:modelValue":f[4]||(f[4]=e=>re.value=e),"active-action-icon":S(L),"inactive-action-icon":S(H),style:{"--el-switch-on-color":"var(--bg-color-mute)"},onChange:se},null,8,["modelValue","active-action-icon","inactive-action-icon"])]),_:1},512)]),_:1},8,["collapse"])]),_:1},8,["style"]),j(O,{onContextmenu:ne,style:$(ie.value),ref_key:"mainRef",ref:ee},{default:T(()=>[j(x,{locale:S(d),card:K,dialog:W,message:N},{default:T(()=>[j(S(p),null,{default:T(({Component:e})=>[(U(),C(G,{include:["Home"]},[(U(),C(M(e)))],1024))]),_:1}),j(k,{right:100,bottom:100}),j(y,{modelValue:Q.value,"onUpdate:modelValue":f[5]||(f[5]=e=>Q.value=e),onClose:te,onFinish:ae,"target-area-clickable":!1,"close-on-press-escape":!1},{default:T(()=>[j(w,{title:"提示",description:"欢迎使用抖破点歌姬"}),j(w,{title:"提示",description:"这里是点歌，可以查看抖和破站的点歌列表",placement:"right",target:X.value?.$el},null,8,["target"]),j(w,{title:"提示",description:"这里是设置，可以设置抖和破站的直播间监听",placement:"right",target:Y.value?.$el},null,8,["target"]),j(w,{title:"提示",description:"这是主题开关，可以切换主题",placement:"right",target:Z.value?.$el},null,8,["target"]),j(w,{title:"提示",description:"这里是主界面",placement:"left",target:ee.value?.$el},null,8,["target"])]),_:1},8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-1ec89630"]]);export{B as default};
