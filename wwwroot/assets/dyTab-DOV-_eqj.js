import{x as e,y as a,A as o,t as l,w as s,p as r,a as t}from"./vendor-element-plus-qW3C2DUX.js";import{o as d,r as i,ap as n,Z as u,J as p,t as _,K as m,L as f,U as c,R as w}from"./vendor-libs-DrwAYO3L.js";import"./vendor-exceljs-BzIpynsW.js";const v=d({__name:"dyTab",setup(d){const v=i(),g=i(!1),y=i(!1),b=n({id:0,room_id:0,sing_prefix:"点歌",sing_cd:0}),x=()=>{y.value=!0,window.pywebview.api.get_dy_config().then(e=>{if(0!=e.code)t.warning(e.msg);else{if(!e.data)return void(y.value=!1);const a=JSON.parse(e.data);Object.assign(b,a)}y.value=!1}).catch(e=>{t.error(e),y.value=!1})},V=()=>{g.value=!0,window.pywebview.api.add_or_update_dy_config(b).then(e=>{0!=e.code?t.warning(e.msg):(window.pywebview.api.restart_douyin_ws(),t.success(e.msg),x()),g.value=!1}).catch(e=>{t.error(e),g.value=!1})};return u(()=>{x()}),(t,d)=>{const i=o,n=a,u=l,x=e,h=r,j=s;return _(),p(h,null,{default:m(()=>[f((_(),p(x,{mode:b,ref_key:"refForm",ref:v,"label-width":"auto"},{default:m(()=>[c(n,{label:"房间号",prop:"room_id"},{default:m(()=>[c(i,{modelValue:b.room_id,"onUpdate:modelValue":d[0]||(d[0]=e=>b.room_id=e),type:"text",min:"1"},null,8,["modelValue"])]),_:1}),c(n,{label:"点歌指令",prop:"sing_prefix"},{default:m(()=>[c(i,{modelValue:b.sing_prefix,"onUpdate:modelValue":d[1]||(d[1]=e=>b.sing_prefix=e),type:"text"},null,8,["modelValue"])]),_:1}),c(n,null,{default:m(()=>[f((_(),p(u,{type:"primary",onClick:V},{default:m(()=>[...d[2]||(d[2]=[w("保存",-1)])]),_:1})),[[j,g.value]])]),_:1})]),_:1},8,["mode"])),[[j,y.value]])]),_:1})}}});export{v as default};
