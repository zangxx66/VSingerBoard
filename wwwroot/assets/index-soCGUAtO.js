import{E as a,b as e,v as s}from"./vendor-element-plus-ChNPy6BA.js";import{_ as n}from"./linkIcon-DBucSiKk.js";import{o as r,Y as t,r as l,M as o,A as i,B as d,b1 as c,ad as g,t as u,C as h,q as p,y as m,H as v,u as f}from"./vendor-libs-Crij45JJ.js";import{r as j,u as b}from"./index-BmqyJb8x.js";import"./vendor-exceljs-C-8i3j8b.js";import{B as x,m as _}from"./vendor-marked-BA71NfC7.js";import{H}from"./vendor-highlight-js-DhZgkat3.js";import"./vendor-vue-SbnYag36.js";const L={class:"changelog-container"},k=["innerHTML"],w=r({__name:"index",setup(r){const w=t({version:"",publishedAt:"",changelog:""}),y=l(!1),A=new x(_({emptyLangClass:"hljs",langPrefix:"",highlight(a,e,s){const n=H.getLanguage(e)?e:"plaintext";return H.highlight(a,{language:n}).value}})),M=n;return o(()=>{(async()=>{y.value=!0;const e=await j.checkUpdate({});if(0==e.data.code){const a=e.data.data;w.version=a.version,w.publishedAt=b(a.published_at);const s=await A.parse(a.body),n=document.createElement("div");c(g(M),n);const r=n.innerHTML;w.changelog=s.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${r}</a>`)}else a.warning("获取更新日志失败");y.value=!1})()}),(a,n)=>{const r=e,t=s;return u(),i(r,null,{header:d(()=>[...n[0]||(n[0]=[m("div",{class:"card-header"},[m("span",null,"更新日志")],-1)])]),default:d(()=>[h((u(),p("div",L,[m("h3",null,v(f(w).version),1),m("p",null,v(f(w).publishedAt),1),m("div",{class:"md-content",innerHTML:f(w).changelog},null,8,k)])),[[t,f(y)]])]),_:1})}}});export{w as default};
