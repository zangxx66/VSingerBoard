import{a as e,b as a,c as t,d as l,e as n,f as o,g as s,h as i,z as d,i as r,j as c,k as u,l as m}from"./vendor-element-plus-Bd9JbKVR.js";import{t as p,c as f,r as g,a as v,p as _,_ as h}from"./index-Bl6l-GlS.js";import{q as b,aa as k,r as w,c as y,Y as x,I as C,J as T,T as j,u as I,bF as S,Q as V,bG as R,bH as D,A as E,bI as H,bJ as $,h as A,a8 as G,aZ as L,bK as M,P as U,a2 as z,v as F,bE as J}from"./vendor-libs-jc_y8n1R.js";import{u as O,r as q}from"./interval-DHpP6rxF.js";import"./vendor-exceljs-C-8i3j8b.js";import{u as K}from"./theme-C0E2dJVv.js";import"./vendor-vue-k6REBtrB.js";const P=h(b({__name:"defaultLayout",setup(h){const b=O(),P=K(),Q={shadow:"always"},W={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},Y={offset:70,plain:!0},Z=k({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1}),B=w(!1),N=w(),X=w(),ee=w(),ae=w(),te=()=>{Z.navSideTour=!0,ne(),B.value=!1},le=async()=>{await z(),Z.navSideTour||(Z.navSideTour=!0,ne(),B.value=!1)},ne=()=>{q.addOrUpdateGlobalConfig({data:Z}).then(a=>{const t=a.data;0!=t.code?e.warning(t.msg||"保存失败"):Z.id=t.data}).catch(a=>{e.error(a)})},oe=e=>{if(g.currentRoute.value.name==e)return Z.collapse=!Z.collapse,void ne();g.push({name:e})},se=async a=>{a.preventDefault();const t=window.getSelection()?.toString(),l=document.activeElement,n=l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement,o=await window.pywebview.api.is_bundle();let s=!1;const i=await window.pywebview.api.check_clipboard();i&&i.length>0&&(s=!0);const d=[{label:"拷贝",disabled:!t,onClick:()=>{t&&(v(t),e.success("拷贝成功"))}},{label:"粘贴",disabled:!n||!s,onClick:()=>{_(l)}}];o||d.push({label:"重新加载",disabled:!1,onClick:()=>{b.clearAllIntervals(),window.pywebview.api.reload()}}),J.showContextMenu({x:a.x,y:a.y,theme:ce.value?"mac dark":"mac",zIndex:100,minWidth:230,items:d})},ie=()=>{Z.dark_mode=!Z.dark_mode,ne(),p(Z.dark_mode),P.setDarkTheme(Z.dark_mode)},de=y(()=>({left:Z.collapse?"64px":"200px"})),re=y(()=>({width:Z.collapse?"64px":"200px"})),ce=y(()=>P.getDarkTheme());return x(()=>{setTimeout(()=>{(async()=>{q.getGlobalConfig({}).then(a=>{const t=a.data;if(0!=t.code)e.warning(t.msg);else{const e=t.data.data;e?(Object.assign(Z,e),p(e.dark_mode),P.setDarkTheme(e.dark_mode),e.check_update&&(f(),b.addInterval("check_update",f,216e5)),e.navSideTour||(B.value=!0)):B.value=!0}}).catch(a=>{e.error(a)})})()},1e3)}),(e,p)=>{const f=n,g=l,v=o,_=t,h=s,b=L("router-view"),k=r,w=u,y=c,x=i,z=m,J=a;return F(),C(J,{class:"layout-container-demo"},{default:T(()=>[j(h,{style:G(I(re))},{default:T(()=>[j(_,{"default-active":"0",collapse:I(Z).collapse,class:"layout-aside-menu"},{default:T(()=>[j(g,{index:"0",onClick:p[0]||(p[0]=e=>oe("home")),ref_key:"homeRef",ref:N},{title:T(()=>[...p[6]||(p[6]=[V("点歌板",-1)])]),default:T(()=>[j(f,null,{default:T(()=>[j(I(S))]),_:1})]),_:1},512),j(g,{index:"1",onClick:p[1]||(p[1]=e=>oe("settings")),ref_key:"settingsRef",ref:X},{title:T(()=>[...p[7]||(p[7]=[V("设置",-1)])]),default:T(()=>[j(f,null,{default:T(()=>[j(I(R))]),_:1})]),_:1},512),j(g,{index:"2",onClick:p[2]||(p[2]=e=>oe("changelog"))},{title:T(()=>[...p[8]||(p[8]=[V("更新日志",-1)])]),default:T(()=>[j(f,null,{default:T(()=>[j(I(D))]),_:1})]),_:1}),j(g,{index:"3",onClick:p[3]||(p[3]=e=>oe("about"))},{title:T(()=>[...p[9]||(p[9]=[V("关于",-1)])]),default:T(()=>[j(f,null,{default:T(()=>[j(I(E))]),_:1})]),_:1}),j(g,{index:"4",ref_key:"themeRef",ref:ee},{default:T(()=>[j(v,{modelValue:I(ce),"onUpdate:modelValue":p[4]||(p[4]=e=>A(ce)?ce.value=e:null),"active-action-icon":I($),"inactive-action-icon":I(H),style:{"--el-switch-on-color":"var(--bg-color-mute)"},onChange:ie},null,8,["modelValue","active-action-icon","inactive-action-icon"])]),_:1},512)]),_:1},8,["collapse"])]),_:1},8,["style"]),j(z,{onContextmenu:se,style:G(I(de)),ref_key:"mainRef",ref:ae},{default:T(()=>[j(x,{locale:I(d),card:Q,dialog:W,message:Y},{default:T(()=>[j(b,null,{default:T(({Component:e})=>[(F(),C(M,{include:["Home"]},[(F(),C(U(e)))],1024))]),_:1}),j(k,{right:100,bottom:100}),j(y,{modelValue:I(B),"onUpdate:modelValue":p[5]||(p[5]=e=>A(B)?B.value=e:null),onClose:le,onFinish:te,"target-area-clickable":!1,"close-on-press-escape":!1},{default:T(()=>[j(w,{title:"提示",description:"欢迎使用点歌姬"}),j(w,{title:"提示",description:"这里是点歌，可以查看抖和破站的点歌列表",placement:"right",target:I(N)?.$el},null,8,["target"]),j(w,{title:"提示",description:"这里是设置，可以设置抖和破站的直播间监听",placement:"right",target:I(X)?.$el},null,8,["target"]),j(w,{title:"提示",description:"这是主题开关，可以切换主题",placement:"right",target:I(ee)?.$el},null,8,["target"]),j(w,{title:"提示",description:"这里是主界面",placement:"left",target:I(ae)?.$el},null,8,["target"])]),_:1},8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-0df9e4b7"]]);export{P as default};
