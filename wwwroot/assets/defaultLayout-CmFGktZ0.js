import{E as e,a,b as t,c as l,d as o,e as s,f as n,g as i,z as d,h as r,i as c,j as u,k as m}from"./vendor-element-plus-J1ABhGI2.js";import{R as p}from"./vendor-vue-aS4A03Y7.js";import{t as f,r as v}from"./index-PVAVDtve.js";import{q as _,bA as g,ab as h,r as b,c as k,_ as w,K as y,v as x,L as C,V as j,u as T,bB as S,S as R,bC as V,bD as D,B as E,bE as I,bF as L,a9 as $,bG as z,R as A,a3 as G,bz as H}from"./vendor-libs-BJ1SQKxe.js";import{r as M}from"./request-DpsVWM9s.js";import{c as U,p as q}from"./tool-Dmzci1qF.js";import"./vendor-exceljs-BzIpynsW.js";import{u as B}from"./interval-CRvFp0eB.js";import{u as F}from"./theme-DRkUhqq8.js";import{_ as O}from"./_plugin-vue_export-helper-BCo6x5W8.js";const K=O(_({__name:"defaultLayout",setup(_){const O=B(),K=F(),{copy:W}=g(),J={shadow:"always"},N={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},P={offset:70,plain:!0},Q=h({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1}),X=b(!1),Y=b(),Z=b(),ee=b(),ae=b(),te=()=>{Q.navSideTour=!0,oe(),X.value=!1},le=async()=>{await G(),Q.navSideTour||(Q.navSideTour=!0,oe(),X.value=!1)},oe=()=>{M.addOrUpdateGlobalConfig({data:Q}).then(a=>{const t=a.data;0!=t.code?e.warning(t.msg||"保存失败"):Q.id=t.data}).catch(a=>{e.error(a)})},se=e=>{if(v.currentRoute.value.name==e)return Q.collapse=!Q.collapse,void oe();v.push({name:e})},ne=async a=>{a.preventDefault();const t=window.getSelection()?.toString(),l=document.activeElement,o=l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement,s=await window.pywebview.api.is_bundle();let n=!1;const i=await window.pywebview.api.check_clipboard();i&&i.length>0&&(n=!0);const d=[{label:"拷贝",disabled:!t,onClick:()=>{t&&(W(t),e.success("拷贝成功"))}},{label:"粘贴",disabled:!o||!n,onClick:()=>{q(l)}}];s||d.push({label:"重新加载",disabled:!1,onClick:()=>{O.clearAllIntervals(),window.pywebview.api.reload()}}),H.showContextMenu({x:a.x,y:a.y,theme:ce.value?"mac dark":"mac",zIndex:100,minWidth:230,items:d})},ie=()=>{Q.dark_mode=!Q.dark_mode,oe(),f(Q.dark_mode),K.setDarkTheme(Q.dark_mode)},de=k(()=>({left:Q.collapse?"64px":"200px"})),re=k(()=>({width:Q.collapse?"64px":"200px"})),ce=k(()=>K.getDarkTheme());return w(()=>{setTimeout(()=>{(async()=>{M.getGlobalConfig({}).then(a=>{const t=a.data;if(0!=t.code)e.warning(t.msg);else{const e=t.data.data;e?(Object.assign(Q,e),f(e.dark_mode),K.setDarkTheme(e.dark_mode),e.check_update&&(U(),O.addInterval("check_update",U,216e5)),e.navSideTour||(X.value=!0)):X.value=!0}}).catch(a=>{e.error(a)})})()},1e3)}),(e,f)=>{const v=o,_=l,g=s,h=t,b=n,k=r,w=u,G=c,H=i,M=m,U=a;return x(),y(U,{class:"layout-container-demo"},{default:C(()=>[j(b,{style:$(re.value)},{default:C(()=>[j(h,{"default-active":"0",collapse:Q.collapse,class:"layout-aside-menu"},{default:C(()=>[j(_,{index:"0",onClick:f[0]||(f[0]=e=>se("home")),ref_key:"homeRef",ref:Y},{title:C(()=>[...f[6]||(f[6]=[R("点歌板",-1)])]),default:C(()=>[j(v,null,{default:C(()=>[j(T(S))]),_:1})]),_:1},512),j(_,{index:"1",onClick:f[1]||(f[1]=e=>se("settings")),ref_key:"settingsRef",ref:Z},{title:C(()=>[...f[7]||(f[7]=[R("设置",-1)])]),default:C(()=>[j(v,null,{default:C(()=>[j(T(V))]),_:1})]),_:1},512),j(_,{index:"2",onClick:f[2]||(f[2]=e=>se("changelog"))},{title:C(()=>[...f[8]||(f[8]=[R("更新日志",-1)])]),default:C(()=>[j(v,null,{default:C(()=>[j(T(D))]),_:1})]),_:1}),j(_,{index:"3",onClick:f[3]||(f[3]=e=>se("about"))},{title:C(()=>[...f[9]||(f[9]=[R("关于",-1)])]),default:C(()=>[j(v,null,{default:C(()=>[j(T(E))]),_:1})]),_:1}),j(_,{index:"4",ref_key:"themeRef",ref:ee},{default:C(()=>[j(g,{modelValue:ce.value,"onUpdate:modelValue":f[4]||(f[4]=e=>ce.value=e),"active-action-icon":T(L),"inactive-action-icon":T(I),style:{"--el-switch-on-color":"var(--bg-color-mute)"},onChange:ie},null,8,["modelValue","active-action-icon","inactive-action-icon"])]),_:1},512)]),_:1},8,["collapse"])]),_:1},8,["style"]),j(M,{onContextmenu:ne,style:$(de.value),ref_key:"mainRef",ref:ae},{default:C(()=>[j(H,{locale:T(d),card:J,dialog:N,message:P},{default:C(()=>[j(T(p),null,{default:C(({Component:e})=>[(x(),y(z,{include:["Home"]},[(x(),y(A(e)))],1024))]),_:1}),j(k,{right:100,bottom:100}),j(G,{modelValue:X.value,"onUpdate:modelValue":f[5]||(f[5]=e=>X.value=e),onClose:le,onFinish:te,"target-area-clickable":!1,"close-on-press-escape":!1},{default:C(()=>[j(w,{title:"提示",description:"欢迎使用抖破点歌姬"}),j(w,{title:"提示",description:"这里是点歌，可以查看抖和破站的点歌列表",placement:"right",target:Y.value?.$el},null,8,["target"]),j(w,{title:"提示",description:"这里是设置，可以设置抖和破站的直播间监听",placement:"right",target:Z.value?.$el},null,8,["target"]),j(w,{title:"提示",description:"这是主题开关，可以切换主题",placement:"right",target:ee.value?.$el},null,8,["target"]),j(w,{title:"提示",description:"这里是主界面",placement:"left",target:ae.value?.$el},null,8,["target"])]),_:1},8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-a72da272"]]);export{K as default};
