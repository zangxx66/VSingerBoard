const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-4y_u9Uic.js","assets/vendor-element-plus-qW3C2DUX.js","assets/vendor-libs-DrwAYO3L.js","assets/vendor-exceljs-BzIpynsW.js","assets/vendor-libs-CtmmCz1m.css","assets/vendor-element-plus-z8Xh5_mr.css","assets/vendor-vue-Bh1BfAe7.js","assets/Home-BrlJ-4Uw.css","assets/Settings-DU-ijX7t.js","assets/Settings-Dplzy4a0.css","assets/Changelog-B2ynJyOl.js","assets/vendor-marked-Con12i8t.js","assets/About-C-QM8i1u.js","assets/About-B5YTHd3J.css"])))=>i.map(i=>d[i]);
import{bj as e,bk as t,bl as a,bm as n,bn as l,bo as o,bp as s,r as i,ap as r,o as c,bq as d,c as u,Z as m,J as p,t as f,K as g,U as v,a8 as _,u as h,br as b,R as w,bs as y,bt as k,z as x,bu as E,bv as C,q as T,bw as I,G as S,bx as j,Q as A,by as L,b8 as D}from"./vendor-libs-DrwAYO3L.js";import{c as R,a as O,i as P,d as H,R as M,b as V}from"./vendor-vue-Bh1BfAe7.js";import{E as $,a as Y,b as q,c as z,d as N,e as U,f as B,g as J,h as K,i as W,j as F,z as G,k as Q,l as Z,m as X,n as ee,o as te}from"./vendor-element-plus-qW3C2DUX.js";import"./vendor-exceljs-BzIpynsW.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ae="/assets/images/logo.png",ne={},le=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in ne)return;ne[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,l&&n.setAttribute("nonce",l),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function l(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&l(e.reason);return e().catch(l)})};e.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3,parent:"body"});t.extend(a),t.extend(n),t.extend(l),t.locale("zh-cn");const oe=e=>t.unix(e).format("YYYY-MM-DD HH:mm:ss"),se=e=>t.utc(e).local().format("YYYY-MM-DD HH:mm:ss"),ie=()=>t().unix(),re=s(o()),ce=async()=>{const e=await window.pywebview.api.update_verion();0==e.code&&""!=e.url?$({title:"提示",message:e.msg,type:"primary",position:"bottom-right",onClick:()=>{const t=document.createElement("a");t.href=e.url,t.target="_blank",t.click()}}):Y.warning(e.msg)},de=R({history:O("/"),routes:[{path:"/",name:"home",component:()=>le(()=>import("./Home-4y_u9Uic.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))},{path:"/settings",name:"settings",component:()=>le(()=>import("./Settings-DU-ijX7t.js"),__vite__mapDeps([8,1,2,3,4,5,6,9]))},{path:"/changelog",name:"changelog",component:()=>le(()=>import("./Changelog-B2ynJyOl.js"),__vite__mapDeps([10,1,2,3,4,5,11,6]))},{path:"/about",name:"about",component:()=>le(()=>import("./About-C-QM8i1u.js"),__vite__mapDeps([12,1,2,3,4,5,6,13]))}]});de.beforeEach(async(t,a)=>(e.start(),!0)),de.afterEach((t,a,n)=>{e.done(),P(n)&&t.name!=a.name&&Y.warning(`failled navigation:${n}`)});const ue=H("interval",()=>{const e=i({});return{activeIntervals:e,addInterval:(t,a,n)=>{e.value[t]&&clearInterval(e.value[t]),e.value[t]=window.setInterval(a,n)},removeInterval:t=>{e.value[t]&&(clearInterval(e.value[t]),delete e.value[t])},clearAllIntervals:()=>{Object.keys(e.value).forEach(t=>{clearInterval(e.value[t])}),e.value={}}}}),me=H("theme",()=>{const e=r({id:0,dark_mode:!1}),t=t=>{window.pywebview.api.add_or_update_global_config({id:e.id,dark_mode:t}).then(a=>{0==a.code?(e.dark_mode=t,re(t),e.id=a.data):Y.warning(a.msg)}).catch(e=>Y.error(e))};return{globalCfg:e,getDarkTheme:()=>e.dark_mode,setDarkTheme:(a,n)=>{e.id=a,n!=e.dark_mode&&t(n)},updateConfig:t}}),pe={key:0,src:"/assets/images/logo_night.png",alt:"logo",style:{width:"100px"}},fe={key:1,src:ae,alt:"logo",style:{width:"100px"}},ge=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a},ve=D(ge(c({__name:"App",setup(e){const t=i("0"),a=i(!1),n=ue(),l=me(),{copy:o}=d(),s={shadow:"always"},c={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},D={offset:70,plain:!0},R=r({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1}),O=i(!1),P=i(),H=i(),V=i(),$=i(),ae=i(),ne=i(),le=async()=>{R.navSideTour=!0;try{const e=await window.pywebview.api.add_or_update_global_config(R);0!=e.code&&Y.warning(e.msg||"保存失败")}catch(e){Y.error(e)}finally{O.value=!1}},oe=e=>{de.push({name:e})},se=async e=>{e.preventDefault();const t=window.getSelection()?.toString(),a=document.activeElement,l=a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement,s=await window.pywebview.api.is_bundle();let i=!1;const r=await window.pywebview.api.check_clipboard();r&&r.length>0&&(i=!0);const c=[{label:"拷贝",disabled:!t,onClick:()=>{t&&(o(t),Y.success("拷贝成功"))}},{label:"粘贴",disabled:!l||!i,onClick:()=>{(async e=>{if(e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))try{const t=await window.pywebview.api.check_clipboard();if("string"==typeof t){const a=e,n=a.selectionStart??a.value.length,l=a.selectionEnd??a.value.length;a.value=a.value.substring(0,n)+t+a.value.substring(l),a.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),a.focus();const o=n+t.length;a.selectionStart=a.selectionEnd=o}}catch(t){}})(a)}}];s||c.push({label:"重新加载",disabled:!1,onClick:()=>{n.clearAllIntervals(),window.pywebview.api.reload()}}),L.showContextMenu({x:e.x,y:e.y,theme:he.value?"mac dark":"mac",zIndex:100,minWidth:230,items:c})},ie=()=>{window.pywebview.api.minus_window(),t.value="0"},ge=()=>{ee.confirm("是否退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{te.service({lock:!0,text:"正在退出...",background:"rgba(0, 0, 0, 0.7)"}),n.clearAllIntervals(),window.pywebview.api.on_closing()}).catch(e=>{"string"==typeof e&&"cancel"==e||Y.error(e)})},ve=u(()=>({left:a.value?"64px":"200px"})),_e=u(()=>({width:a.value?"64px":"200px"})),he=u(()=>l.getDarkTheme());return m(()=>{setTimeout(()=>{(async()=>{try{const e=await window.pywebview.api.get_global_config();if(e){const t=JSON.parse(e);Object.assign(R,t),re(t.dark_mode),l.setDarkTheme(t.id,t.dark_mode),t.check_update&&(ce(),n.addInterval("check_update",ce,216e5)),t.navSideTour||(O.value=!0)}else O.value=!0}catch(e){Y.error(e)}})();const e=de.currentRoute.value.path;alert(e)},1e3)}),(e,n)=>{const o=B,i=U,r=J,d=N,u=z,m=K,L=Q,R=X,Y=Z,ee=F,te=W,re=q;return f(),p(re,{class:"layout-container-demo"},{default:g(()=>[v(u,{style:_(_e.value)},{default:g(()=>[v(d,{"default-active":"0",collapse:a.value,class:"layout-aside-menu"},{default:g(()=>[v(i,{index:"0",onClick:n[0]||(n[0]=e=>oe("home")),ref_key:"homeRef",ref:P},{title:g(()=>[...n[8]||(n[8]=[w("点歌板",-1)])]),default:g(()=>[v(o,null,{default:g(()=>[v(h(b))]),_:1})]),_:1},512),v(i,{index:"1",onClick:n[1]||(n[1]=e=>oe("settings")),ref_key:"settingsRef",ref:H},{title:g(()=>[...n[9]||(n[9]=[w("设置",-1)])]),default:g(()=>[v(o,null,{default:g(()=>[v(h(y))]),_:1})]),_:1},512),v(i,{index:"2",onClick:n[2]||(n[2]=e=>oe("changelog"))},{title:g(()=>[...n[10]||(n[10]=[w("更新日志",-1)])]),default:g(()=>[v(o,null,{default:g(()=>[v(h(k))]),_:1})]),_:1}),v(i,{index:"3",onClick:n[3]||(n[3]=e=>oe("about"))},{title:g(()=>[...n[11]||(n[11]=[w("关于",-1)])]),default:g(()=>[v(o,null,{default:g(()=>[v(h(x))]),_:1})]),_:1}),v(i,{index:"4",ref_key:"themeRef",ref:V},{default:g(()=>[v(r,{modelValue:he.value,"onUpdate:modelValue":n[4]||(n[4]=e=>he.value=e),"active-action-icon":h(C),"inactive-action-icon":h(E),style:{"--el-switch-on-color":"var(--bg-color-mute)"},onChange:n[5]||(n[5]=e=>h(l).updateConfig(!he.value))},null,8,["modelValue","active-action-icon","inactive-action-icon"])]),_:1},512)]),_:1},8,["collapse"])]),_:1},8,["style"]),v(m,{class:"pywebview-drag-region"},{default:g(()=>[v(d,{"default-active":t.value,mode:"horizontal",ellipsis:!1,class:"toolbar"},{default:g(()=>[v(i,{index:"0",onClick:n[6]||(n[6]=e=>a.value=!a.value),ref_key:"collapseRef",ref:$},{default:g(()=>[he.value?(f(),T("img",pe)):(f(),T("img",fe))]),_:1},512),v(i,{index:"1",onClick:ie,ref_key:"minusRef",ref:ae},{default:g(()=>[v(o,null,{default:g(()=>[v(h(I))]),_:1})]),_:1},512),v(i,{index:"2",onClick:ge,ref_key:"quitRef",ref:ne},{default:g(()=>[v(o,null,{default:g(()=>[v(h(S))]),_:1})]),_:1},512)]),_:1},8,["default-active"])]),_:1}),v(te,{onContextmenu:se,style:_(ve.value)},{default:g(()=>[v(ee,{locale:h(G),card:s,dialog:c,message:D},{default:g(()=>[v(h(M),null,{default:g(({Component:e})=>[(f(),p(j,{include:["Home"]},[(f(),p(A(e)))],1024))]),_:1}),v(L,{right:100,bottom:100}),v(Y,{modelValue:O.value,"onUpdate:modelValue":n[7]||(n[7]=e=>O.value=e),onFinish:le,"target-area-clickable":!1,"close-on-press-escape":!1,"show-close":!1},{default:g(()=>[v(R,{title:"提示",description:"欢迎使用抖破点歌姬"}),v(R,{title:"提示",description:"这里是点歌，可以查看抖和破站的点歌列表",placement:"right",target:P.value?.$el},null,8,["target"]),v(R,{title:"提示",description:"这里是设置，可以设置抖和破站的直播间监听",placement:"right",target:H.value?.$el},null,8,["target"]),v(R,{title:"提示",description:"这是主题开关，可以切换主题",placement:"right",target:V.value?.$el},null,8,["target"]),v(R,{title:"提示",description:"点击这里可以收缩/展开侧边栏",placement:"bottom",target:$.value?.$el},null,8,["target"]),v(R,{title:"提示",description:"点击这里最小化",placement:"bottom",target:ae.value?.$el},null,8,["target"]),v(R,{title:"提示",description:"点击这里退出",placement:"bottom",target:ne.value?.$el},null,8,["target"])]),_:1},8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-be612227"]]));ve.use(V()),ve.use(de),ve.use(L),ve.mount("#app");export{le as _,ge as a,se as b,ae as c,ce as d,me as e,re as f,ie as g,oe as t,ue as u};
