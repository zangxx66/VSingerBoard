const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DKPDd5Mj.js","assets/vendor-element-plus-e6HPG-4R.js","assets/vendor-libs-C0o6WDcM.js","assets/vendor-exceljs-BzIpynsW.js","assets/vendor-libs-CtmmCz1m.css","assets/vendor-element-plus-q5unlXqn.css","assets/vendor-vue-Dc1K7n3v.js","assets/Home-BFBFvEsB.css","assets/Settings-Bh5vnLQB.js","assets/Settings-fCOeOllw.css","assets/Changelog-BXqXWMVP.js","assets/vendor-marked-Con12i8t.js","assets/About-D-StPvnq.js","assets/About-dAyUiXfw.css"])))=>i.map(i=>d[i]);
import{b9 as e,ba as t,bb as a,bc as n,bd as o,be as i,bf as s,bg as l,r,ap as c,o as d,bh as u,c as p,Z as m,J as g,t as f,K as _,U as v,a8 as b,u as h,bi as w,R as y,bj as k,bk as C,z as x,bl as E,bm as T,q as I,bn as L,G as j,bo as D,Q as O,bp as A,a_ as P}from"./vendor-libs-C0o6WDcM.js";import{c as S,a as H,i as M,d as B,R as U,b as Y}from"./vendor-vue-Dc1K7n3v.js";import{E as R,a as V,b as q,c as z,d as G,e as N,f as $,g as K,h as Q,i as W,j as J,z as Z,k as F,l as X,m as ee}from"./vendor-element-plus-e6HPG-4R.js";import"./vendor-exceljs-BzIpynsW.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const te="/assets/images/logo.png",ae={},ne=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in ae)return;ae[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,o&&n.setAttribute("nonce",o),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})};e.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3,parent:"body"});t.extend(a),t.extend(n),t.extend(o),t.locale("zh-cn");const oe=e=>t.unix(e).format("YYYY-MM-DD HH:mm:ss"),ie=e=>t.utc(e).local().format("YYYY-MM-DD HH:mm:ss"),se=()=>t().unix(),le=s(i()),re=async()=>{const e=await window.pywebview.api.update_verion();0==e.code&&""!=e.url?R({title:"提示",message:e.msg,type:"primary",position:"bottom-right",onClick:()=>{const t=document.createElement("a");t.href=e.url,t.target="_blank",t.click()}}):V.warning(e.msg)},ce=S({history:H("/"),routes:[{path:"/",name:"home",component:()=>ne(()=>import("./Home-DKPDd5Mj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))},{path:"/settings",name:"settings",component:()=>ne(()=>import("./Settings-Bh5vnLQB.js"),__vite__mapDeps([8,1,2,3,4,5,6,9]))},{path:"/changelog",name:"changelog",component:()=>ne(()=>import("./Changelog-BXqXWMVP.js"),__vite__mapDeps([10,1,2,3,4,5,11,6]))},{path:"/about",name:"about",component:()=>ne(()=>import("./About-D-StPvnq.js"),__vite__mapDeps([12,1,2,3,4,5,6,13]))}]});ce.beforeEach(async(t,a)=>(e.start(),!0)),ce.afterEach((t,a,n)=>{e.done(),M(n)&&t.name!=a.name&&V.warning(`failled navigation:${n}`)});const de=l.create({baseURL:"http://127.0.0.1:8000",timeout:5e3});de.interceptors.request.use(e=>(e.headers["x-token"]=window.pywebview.token,e),e=>Promise.reject(e));const ue=new class{async get(e,t){return await de.get(e,{params:t})}async post(e,t){return await de.post(e,t)}};const pe=new class{async getBiliConfig(e){return await ue.get("/api/get_bili_config",e)}async addOrUpdateBiliConfig(e){return await ue.post("/api/add_or_update_bili_config",e)}async getBiliCredntialList(e){return await ue.get("/api/get_bili_credential_list",e)}async refreshBiliCredential(e){return await ue.get("/api/refresh_bili_credential",e)}async deleteBiliCredential(e){return await ue.post("/api/delete_bili_credential",e)}async getBiliCredentialCode(e){return await ue.get("/api/get_bili_credential_code",e)}async checkQrCode(e){return await ue.get("/api/check_qr_code",e)}async getDyConfig(e){return await ue.get("/api/get_dy_config",e)}async addOrUpdateDyConfig(e){return await ue.post("/api/add_or_update_dy_config",e)}async getGlobalConfig(e){return await ue.get("/api/get_global_config",e)}async addOrUpdateGlobalConfig(e){return await ue.post("/api/add_or_update_global_config",e)}async getLiveConfig(e){return await ue.get("/api/get_live_config",e)}},me=B("interval",()=>{const e=r({});return{activeIntervals:e,addInterval:(t,a,n)=>{e.value[t]&&clearInterval(e.value[t]),e.value[t]=window.setInterval(a,n)},removeInterval:t=>{e.value[t]&&(clearInterval(e.value[t]),delete e.value[t])},clearAllIntervals:()=>{Object.keys(e.value).forEach(t=>{clearInterval(e.value[t])}),e.value={}}}}),ge=B("contextmenu",()=>{const e=r("mac");return{theme:e,getTheme:()=>e.value,setTheme:t=>{e.value=t}}}),fe=B("theme",()=>{const e=c({id:0,dark_mode:!1}),t=t=>{pe.addOrUpdateGlobalConfig({data:{id:e.id,dark_mode:t}}).then(a=>{const n=a.data;0==n.code?(e.dark_mode=t,le(t)):V.warning(n.msg)}).catch(e=>V.error(e))};return{globalCfg:e,getDarkTheme:()=>e.dark_mode,setDarkTheme:(a,n)=>{e.id=a,n!=e.dark_mode&&t(n)},updateConfig:t}}),_e={key:0,src:"/assets/images/logo_night.png",alt:"logo",style:{width:"100px"}},ve={key:1,src:te,alt:"logo",style:{width:"100px"}},be=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a},he=P(be(d({__name:"App",setup(e){const t=r("0"),a=r(!1),n=me(),o=ge(),i=fe(),{copy:s}=u(),l={shadow:"always"},c={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},d={offset:70,plain:!0},P=e=>{ce.push({name:e})},S=async e=>{e.preventDefault();const t=window.getSelection()?.toString(),a=document.activeElement,n=a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement,i=await window.pywebview.api.is_bundle();let l=!1;const r=await window.pywebview.api.check_clipboard();r&&r.length>0&&(l=!0);const c=[{label:"拷贝",disabled:!t,onClick:()=>{t&&(s(t),V.success("拷贝成功"))}},{label:"粘贴",disabled:!n||!l,onClick:()=>{(async e=>{if(e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))try{const t=await window.pywebview.api.check_clipboard();if("string"==typeof t){const a=e,n=a.selectionStart??a.value.length,o=a.selectionEnd??a.value.length;a.value=a.value.substring(0,n)+t+a.value.substring(o),a.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),a.focus();const i=n+t.length;a.selectionStart=a.selectionEnd=i}}catch(t){}})(a)}}];i||c.push({label:"重新加载",disabled:!1,onClick:()=>{window.pywebview.api.reload()}}),A.showContextMenu({x:e.x,y:e.y,theme:o.getTheme(),zIndex:100,minWidth:230,items:c})},H=()=>{window.pywebview.api.minus_window(),t.value="0"},M=()=>{X.confirm("是否退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee.service({lock:!0,text:"正在退出...",background:"rgba(0, 0, 0, 0.7)"}),n.clearAllIntervals(),window.pywebview.api.on_closing()}).catch(e=>{"string"==typeof e&&"cancel"==e||V.error(e)})},B=p(()=>({left:a.value?"64px":"200px"})),Y=p(()=>({width:a.value?"64px":"200px"})),R=p(()=>i.getDarkTheme());return m(()=>{setTimeout(()=>{(async()=>{pe.getGlobalConfig({}).then(e=>{const t=e.data;if(0!=t.code)V.warning(t.msg);else{const e=t.data.data;if(e){const t=e;le(t.dark_mode),i.setDarkTheme(t.id,t.dark_mode);const a=t.dark_mode?"mac dark":"mac";o.setTheme(a),t.check_update&&(re(),n.addInterval("check_update",re,216e5))}}}).catch(e=>{V.error(e)})})()},1e3)}),(e,n)=>{const o=$,s=N,r=K,u=G,p=z,m=Q,A=F,V=J,X=W,ee=q;return f(),g(ee,{class:"layout-container-demo"},{default:_(()=>[v(p,{style:b(Y.value)},{default:_(()=>[v(u,{collapse:a.value,class:"layout-aside-menu"},{default:_(()=>[v(s,{index:"0",onClick:n[0]||(n[0]=e=>P("home"))},{title:_(()=>[...n[7]||(n[7]=[y("点歌板",-1)])]),default:_(()=>[v(o,null,{default:_(()=>[v(h(w))]),_:1})]),_:1}),v(s,{index:"1",onClick:n[1]||(n[1]=e=>P("settings"))},{title:_(()=>[...n[8]||(n[8]=[y("设置",-1)])]),default:_(()=>[v(o,null,{default:_(()=>[v(h(k))]),_:1})]),_:1}),v(s,{index:"2",onClick:n[2]||(n[2]=e=>P("changelog"))},{title:_(()=>[...n[9]||(n[9]=[y("更新日志",-1)])]),default:_(()=>[v(o,null,{default:_(()=>[v(h(C))]),_:1})]),_:1}),v(s,{index:"3",onClick:n[3]||(n[3]=e=>P("about"))},{title:_(()=>[...n[10]||(n[10]=[y("关于",-1)])]),default:_(()=>[v(o,null,{default:_(()=>[v(h(x))]),_:1})]),_:1}),v(s,{index:"4"},{default:_(()=>[v(r,{modelValue:R.value,"onUpdate:modelValue":n[4]||(n[4]=e=>R.value=e),"active-action-icon":h(T),"inactive-action-icon":h(E),style:{"--el-switch-on-color":"var(--bg-color-mute)"},onChange:n[5]||(n[5]=e=>h(i).updateConfig(!R.value))},null,8,["modelValue","active-action-icon","inactive-action-icon"])]),_:1})]),_:1},8,["collapse"])]),_:1},8,["style"]),v(m,{class:"pywebview-drag-region"},{default:_(()=>[v(u,{"default-active":t.value,mode:"horizontal",ellipsis:!1,class:"toolbar"},{default:_(()=>[v(s,{index:"0",onClick:n[6]||(n[6]=e=>a.value=!a.value)},{default:_(()=>[R.value?(f(),I("img",_e)):(f(),I("img",ve))]),_:1}),v(s,{index:"1",onClick:H},{default:_(()=>[v(o,null,{default:_(()=>[v(h(L))]),_:1})]),_:1}),v(s,{index:"2",onClick:M},{default:_(()=>[v(o,null,{default:_(()=>[v(h(j))]),_:1})]),_:1})]),_:1},8,["default-active"])]),_:1}),v(X,{onContextmenu:S,style:b(B.value)},{default:_(()=>[v(V,{locale:h(Z),card:l,dialog:c,message:d},{default:_(()=>[v(h(U),null,{default:_(({Component:e})=>[(f(),g(D,{include:["Home"]},[(f(),g(O(e)))],1024))]),_:1}),v(A,{right:100,bottom:100})]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-f9bb364e"]]));he.use(Y()),he.use(ce),he.use(A),he.mount("#app");export{ne as _,be as a,ie as b,te as c,re as d,ge as e,fe as f,se as g,le as h,pe as r,oe as t,me as u};
