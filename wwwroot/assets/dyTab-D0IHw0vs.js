import{u as e,w as a,x as t,r as s,v as o,n as r,a as i,E as d}from"./vendor-element-plus-KTUucB3F.js";import{r as n}from"./index-CXGiK0R0.js";import{o as l,r as m,ap as u,Z as p,J as _,t as c,K as f,U as g,L as x,R as y}from"./vendor-libs-C0o6WDcM.js";import"./vendor-vue-Dc1K7n3v.js";import"./vendor-exceljs-BzIpynsW.js";const v=l({__name:"dyTab",setup(l){const v=m(),w=m(!1),b=u({id:0,room_id:0,sing_prefix:"点歌",sing_cd:0}),h=()=>{n.getDyConfig({}).then(e=>{const a=e.data;if(0!=a.code)i.warning(a.msg);else{if(!a.data.data)return;const e=a.data.data;b.id=e.id,b.room_id=e.room_id,b.sing_prefix=e.sing_prefix,b.sing_cd=e.sing_cd}}).catch(e=>i.error(e))},j=()=>{w.value=!0,n.addOrUpdateDyConfig({data:b}).then(e=>{const a=e.data;0!=a.code?i.warning(a.msg):(i.success(a.msg),h(),setTimeout(()=>{V()},1e3)),w.value=!1}).catch(e=>{i.error(e),w.value=!1})},V=async()=>{const e=await window.pywebview.api.get_dy_ws_status();let a="";a=-1==e?"抖音未配置":1==e?"抖音已重新连接":"抖音连接发生错误",d({title:"提示",message:a,type:e>0?"success":"warning",position:"bottom-right"})};return p(()=>{h()}),(i,d)=>{const n=t,l=a,m=s,u=e,p=r,h=o;return c(),_(p,null,{default:f(()=>[g(u,{mode:b,ref_key:"refForm",ref:v,"label-width":"auto"},{default:f(()=>[g(l,{label:"房间号",prop:"room_id"},{default:f(()=>[g(n,{modelValue:b.room_id,"onUpdate:modelValue":d[0]||(d[0]=e=>b.room_id=e),type:"text",min:"1"},null,8,["modelValue"])]),_:1}),g(l,{label:"点歌指令",prop:"sing_prefix"},{default:f(()=>[g(n,{modelValue:b.sing_prefix,"onUpdate:modelValue":d[1]||(d[1]=e=>b.sing_prefix=e),type:"text"},null,8,["modelValue"])]),_:1}),g(l,null,{default:f(()=>[x((c(),_(m,{type:"primary",onClick:j},{default:f(()=>[...d[2]||(d[2]=[y("保存",-1)])]),_:1})),[[h,w.value]])]),_:1})]),_:1},8,["mode"])]),_:1})}}});export{v as default};
