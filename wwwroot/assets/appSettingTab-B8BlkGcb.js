import{u as e,w as a,g as t,r as o,v as l,n as d,a as s}from"./vendor-element-plus-KTUucB3F.js";import{o as r,r as c,ap as n,J as i,t as u,K as p,U as m,u as f,G as v,by as _,L as h,R as k,M as g}from"./vendor-libs-C0o6WDcM.js";import{u as b,e as w,r as y,f as j,d as x}from"./index-CXGiK0R0.js";import"./vendor-exceljs-BzIpynsW.js";import"./vendor-vue-Dc1K7n3v.js";const V=r({__name:"appSettingTab",setup(r,{expose:V}){const C=c(),U=c(!1),G=b(),T=w(),I=n({id:0,dark_mode:!1,check_update:!1,startup:!1}),D=()=>{y.getGlobalConfig({}).then(e=>{const a=e.data;if(0!=a.code)s.warning(a.msg||"获取失败");else{const e=a.data.data;if(e){const a=e;I.id=a.id,I.dark_mode=a.dark_mode,I.check_update=a.check_update,I.startup=a.startup}}}).catch(e=>{s.error(e)})};return V({initConfig:D}),(r,c)=>{const n=t,b=a,w=o,V=e,F=d,J=l;return u(),i(F,null,{header:p(()=>[...c[3]||(c[3]=[g("div",{class:"card-header"},[g("span",null,"应用设置")],-1)])]),default:p(()=>[m(V,{model:I,ref_key:"refForm",ref:C,"label-width":"auto"},{default:p(()=>[m(b,{label:"黑暗模式",prop:"dark_mode"},{default:p(()=>[m(n,{modelValue:I.dark_mode,"onUpdate:modelValue":c[0]||(c[0]=e=>I.dark_mode=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":f(_),"inactive-icon":f(v)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),m(b,{label:"自动检查更新",prop:"check_update"},{default:p(()=>[m(n,{modelValue:I.check_update,"onUpdate:modelValue":c[1]||(c[1]=e=>I.check_update=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":f(_),"inactive-icon":f(v)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),m(b,{label:"开机启动",prop:"startup"},{default:p(()=>[m(n,{"model-value":I.startup,"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-text":"开",inactiveText:"关"},null,8,["model-value"])]),_:1}),m(b,null,{default:p(()=>[h((u(),i(w,{type:"primary",onClick:c[2]||(c[2]=e=>(U.value=!0,void y.addOrUpdateGlobalConfig({data:I}).then(e=>{const a=e.data;0!=a.code?s.warning(a.msg||"保存失败"):(s.success(a.msg||"保存成功"),j(I.dark_mode),T.setDarkTheme(I.id,I.dark_mode),I.check_update?G.addInterval("check_update",x,216e5):G.removeInterval("check_update"),D()),U.value=!1}).catch(e=>{s.error(e),U.value=!1})))},{default:p(()=>[...c[4]||(c[4]=[k("保存",-1)])]),_:1})),[[J,U.value]])]),_:1})]),_:1},8,["model"])]),_:1})}}});export{V as default};
