import{a as e,m as a,v as n}from"./vendor-element-plus-CAbZ6VM0.js";import{q as s,ab as l,r,_ as t,K as i,L as o,bp as u,au as d,aX as c,M as g,t as p,O as v,T as h,v as m}from"./vendor-libs-DUytVOgY.js";import{u as b}from"./index-NUBkmFdY.js";import"./vendor-exceljs-BzIpynsW.js";import{B as f,m as j,H as w}from"./vendor-marked-Con12i8t.js";import"./vendor-vue-BEIf0qVf.js";const _={class:"changelog-container"},L=["innerHTML"],x=s({__name:"Changelog",setup(s){const x=l({version:"",publishedAt:"",changelog:""}),y=r(!1),H=new f(j({emptyLangClass:"hljs",langPrefix:"",highlight(e,a,n){const s=w.getLanguage(a)?a:"plaintext";return w.highlight(e,{language:s}).value}})),M=c("link-icon");return t(()=>{(async()=>{y.value=!0;const a=await window.pywebview.api.update_verion();if(0==a.code){x.version=a.version,x.publishedAt=b(a.published_at);const e=await H.parse(a.body),n=document.createElement("div");u(d(M),n);const s=n.innerHTML;x.changelog=e.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${s}</a>`)}else e.warning("获取更新日志失败");y.value=!1})()}),(e,s)=>{const l=a,r=n;return m(),i(l,null,{header:o(()=>[...s[0]||(s[0]=[v("div",{class:"card-header"},[v("span",null,"更新日志")],-1)])]),default:o(()=>[g((m(),p("div",_,[v("h3",null,h(x.version),1),v("p",null,h(x.publishedAt),1),v("div",{class:"md-content",innerHTML:x.changelog},null,8,L)])),[[r,y.value]])]),_:1})}}});export{x as default};
