import{a,u as e,v as s}from"./vendor-element-plus-Bd9JbKVR.js";import{_ as n}from"./linkIcon-BCNBZca-.js";import{q as r,aa as l,r as t,Y as o,I as i,J as u,bq as d,au as c,K as g,u as p,t as h,L as v,R as m,v as f}from"./vendor-libs-jc_y8n1R.js";import{u as b}from"./index-Bl6l-GlS.js";import"./vendor-exceljs-C-8i3j8b.js";import{B as j,m as w,H as _}from"./vendor-marked-NhXw1FLL.js";import"./vendor-vue-k6REBtrB.js";const L={class:"changelog-container"},x=["innerHTML"],y=r({__name:"Changelog",setup(r){const y=l({version:"",publishedAt:"",changelog:""}),H=t(!1),k=new j(w({emptyLangClass:"hljs",langPrefix:"",highlight(a,e,s){const n=_.getLanguage(e)?e:"plaintext";return _.highlight(a,{language:n}).value}})),A=n;return o(()=>{(async()=>{H.value=!0;const e=await window.pywebview.api.update_verion();if(0==e.code){y.version=e.version,y.publishedAt=b(e.published_at);const a=await k.parse(e.body),s=document.createElement("div");d(c(A),s);const n=s.innerHTML;y.changelog=a.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${n}</a>`)}else a.warning("获取更新日志失败");H.value=!1})()}),(a,n)=>{const r=e,l=s;return f(),i(r,null,{header:u(()=>[...n[0]||(n[0]=[v("div",{class:"card-header"},[v("span",null,"更新日志")],-1)])]),default:u(()=>[g((f(),h("div",L,[v("h3",null,m(p(y).version),1),v("p",null,m(p(y).publishedAt),1),v("div",{class:"md-content",innerHTML:p(y).changelog},null,8,x)])),[[l,p(H)]])]),_:1})}}});export{y as default};
