import{d as v,r as _,b as V,o as C,f as p,h as c,w as s,l as n,bB as h,p as k,G as F,x as B,aT as U,j as f,E as i,bE as D}from"./index-DpnPDkPA.js";/* empty css                   */import{E as N}from"./el-card-BsRx5XEv.js";import{E as T,a as I}from"./el-form-item-aT5iZVfD.js";/* empty css                  *//* empty css                 */import"./Settings-Bq9ruAbq.js";import"./toNumber-DNF8ov4a.js";const A=v({__name:"dyTab",setup(L){const u=_(),r=_(!1),o=V({id:0,room_id:0,sing_prefix:"点歌",sing_cd:0}),m=()=>{f.getDyConfig({}).then(t=>{const e=t.data;if(e.code!=0)i.warning(e.msg);else{if(!e.data.data)return;const a=e.data.data;o.id=a.id,o.room_id=a.room_id,o.sing_prefix=a.sing_prefix,o.sing_cd=a.sing_cd}}).catch(t=>i.error(t))},g=()=>{r.value=!0,f.addOrUpdateDyConfig({data:o}).then(t=>{const e=t.data;e.code!=0?i.warning(e.msg):(i.success(e.msg),m(),w()),r.value=!1}).catch(t=>{i.error(t),r.value=!1})},w=async()=>{const t=await window.pywebview.api.get_dy_ws_status();let e="";t==-1?e="抖音未配置":t==1?e="抖音已重新连接":e="抖音连接发生错误",D({title:"提示",message:e,type:t>0?"success":"warning",position:"bottom-right"})};return C(()=>{m()}),(t,e)=>{const a=h,l=I,y=F,x=T,b=N,E=U;return c(),p(b,null,{default:s(()=>[n(x,{mode:o,ref_key:"refForm",ref:u,"label-width":"auto"},{default:s(()=>[n(l,{label:"房间号",prop:"room_id"},{default:s(()=>[n(a,{modelValue:o.room_id,"onUpdate:modelValue":e[0]||(e[0]=d=>o.room_id=d),type:"text",min:"1"},null,8,["modelValue"])]),_:1}),n(l,{label:"点歌指令",prop:"sing_prefix"},{default:s(()=>[n(a,{modelValue:o.sing_prefix,"onUpdate:modelValue":e[1]||(e[1]=d=>o.sing_prefix=d),type:"text"},null,8,["modelValue"])]),_:1}),n(l,null,{default:s(()=>[k((c(),p(y,{type:"primary",onClick:g},{default:s(()=>[...e[2]||(e[2]=[B("保存",-1)])]),_:1})),[[E,r.value]])]),_:1})]),_:1},8,["mode"])]),_:1})}}});export{A as default};
