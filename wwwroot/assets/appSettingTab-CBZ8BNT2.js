import{w as e,x as a,g as t,r as o,v as d,n as l,a as s}from"./vendor-element-plus-e6HPG-4R.js";import{o as r,r as c,ap as n,Z as i,J as u,t as p,K as m,U as f,u as _,G as v,by as h,L as k,R as g,M as b}from"./vendor-libs-C0o6WDcM.js";import{u as w,e as y,f as j,r as x,h as V,d as T}from"./index-DAklLgth.js";import"./vendor-exceljs-BzIpynsW.js";import"./vendor-vue-Dc1K7n3v.js";const U=r({__name:"appSettingTab",setup(r){const U=c(),C=c(!1),G=w(),I=y(),D=j(),F=n({id:0,dark_mode:!1,check_update:!1,startup:!1}),J=()=>{x.getGlobalConfig({}).then(e=>{const a=e.data;if(0!=a.code)s.warning(a.msg||"获取失败");else{const e=a.data.data;if(e){const a=e;F.id=a.id,F.dark_mode=a.dark_mode,F.check_update=a.check_update,F.startup=a.startup}}}).catch(e=>{s.error(e)})};return i(()=>{J()}),(r,c)=>{const n=t,i=a,w=o,y=e,j=l,K=d;return p(),u(j,null,{header:m(()=>[...c[3]||(c[3]=[b("div",{class:"card-header"},[b("span",null,"应用设置")],-1)])]),default:m(()=>[f(y,{model:F,ref_key:"refForm",ref:U,"label-width":"auto"},{default:m(()=>[f(i,{label:"黑暗模式",prop:"dark_mode"},{default:m(()=>[f(n,{modelValue:F.dark_mode,"onUpdate:modelValue":c[0]||(c[0]=e=>F.dark_mode=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":_(h),"inactive-icon":_(v)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),f(i,{label:"自动检查更新",prop:"check_update"},{default:m(()=>[f(n,{modelValue:F.check_update,"onUpdate:modelValue":c[1]||(c[1]=e=>F.check_update=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":_(h),"inactive-icon":_(v)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),f(i,{label:"开机启动",prop:"startup"},{default:m(()=>[f(n,{"model-value":F.startup,"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-text":"开",inactiveText:"关"},null,8,["model-value"])]),_:1}),f(i,null,{default:m(()=>[k((p(),u(w,{type:"primary",onClick:c[2]||(c[2]=e=>(C.value=!0,void x.addOrUpdateGlobalConfig({data:F}).then(e=>{const a=e.data;if(0!=a.code)s.warning(a.msg||"保存失败");else{s.success(a.msg||"保存成功"),V(F.dark_mode),D.setDarkTheme(F.id,F.dark_mode);const e=F.dark_mode?"mac dark":"mac";I.setTheme(e),F.check_update?G.addInterval("check_update",T,216e5):G.removeInterval("check_update"),J()}C.value=!1}).catch(e=>{s.error(e),C.value=!1})))},{default:m(()=>[...c[4]||(c[4]=[g("保存",-1)])]),_:1})),[[K,C.value]])]),_:1})]),_:1},8,["model"])]),_:1})}}});export{U as default};
