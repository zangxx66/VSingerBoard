import{t as a,u as e,w as t,p as s,v as l,l as o,E as r}from"./vendor-element-plus-J1ABhGI2.js";import{r as d}from"./request-DpsVWM9s.js";import{u}from"./danmaku-CaxirQ34.js";import{q as n,r as i,ab as m,_ as p,K as f,v as _,L as c,M as v,V as g,S as j}from"./vendor-libs-BJ1SQKxe.js";import"./vendor-vue-aS4A03Y7.js";import"./vendor-exceljs-BzIpynsW.js";const x=n({__name:"dyTab",setup(n){const x=i(),y=i(!1),b=i(!1),V=m({id:0,room_id:0,sing_prefix:"点歌",sing_cd:0}),h=u(),k=()=>{y.value=!0,d.addOrUpdateDyConfig({data:V}).then(a=>{const e=a.data;0!=e.code?r.warning(e.msg):(r.success(e.msg),V.id=e.data,h.clearDanmakuList()),y.value=!1}).catch(a=>{r.error(a),y.value=!1})};return p(()=>{b.value=!0,d.getDyConfig({}).then(a=>{const e=a.data;if(0!=e.code)r.warning(e.msg);else{if(!e.data.data)return void(b.value=!1);Object.assign(V,e.data.data)}b.value=!1}).catch(a=>{r.error(a),b.value=!1})}),(r,d)=>{const u=t,n=e,i=s,m=a,p=o,h=l;return _(),f(p,null,{default:c(()=>[v((_(),f(m,{mode:V,ref_key:"refForm",ref:x,"label-width":"auto"},{default:c(()=>[g(n,{label:"房间号",prop:"room_id"},{default:c(()=>[g(u,{modelValue:V.room_id,"onUpdate:modelValue":d[0]||(d[0]=a=>V.room_id=a),type:"text",min:"1"},null,8,["modelValue"])]),_:1}),g(n,{label:"点歌指令",prop:"sing_prefix"},{default:c(()=>[g(u,{modelValue:V.sing_prefix,"onUpdate:modelValue":d[1]||(d[1]=a=>V.sing_prefix=a),type:"text"},null,8,["modelValue"])]),_:1}),g(n,null,{default:c(()=>[v((_(),f(i,{type:"primary",onClick:k},{default:c(()=>[...d[2]||(d[2]=[j("保存",-1)])]),_:1})),[[h,y.value]])]),_:1})]),_:1},8,["mode"])),[[h,b.value]])]),_:1})}}});export{x as default};
