import{w as e,x as a,y as o,g as t,t as i,p as l,a as n}from"./vendor-element-plus-qW3C2DUX.js";import{o as c,r as d,ap as s,L as r,t as u,J as p,K as f,U as m,u as v,G as _,bG as h,R as w,M as k}from"./vendor-libs-DrwAYO3L.js";import{u as y,e as b,f as g,d as V}from"./index-C5BYMrVs.js";import"./vendor-exceljs-BzIpynsW.js";import"./vendor-vue-Bh1BfAe7.js";const j=c({__name:"appSettingTab",setup(c,{expose:j}){const x=d(),U=d(!1),S=d(!1),T=y(),C=b(),G=s({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1}),I=async()=>{S.value=!0;try{const e=await window.pywebview.api.get_global_config();if(e){const a=JSON.parse(e);Object.assign(G,a)}S.value=!1}catch(e){S.value=!1}};return j({initConfig:I}),(c,d)=>{const s=t,y=o,b=i,j=a,J=l,O=e;return r((u(),p(J,null,{header:f(()=>[...d[5]||(d[5]=[k("div",{class:"card-header"},[k("span",null,"应用设置")],-1)])]),default:f(()=>[m(j,{model:G,ref_key:"refForm",ref:x,"label-width":"auto",inline:""},{default:f(()=>[m(y,{label:"黑暗模式",prop:"dark_mode"},{default:f(()=>[m(s,{modelValue:G.dark_mode,"onUpdate:modelValue":d[0]||(d[0]=e=>G.dark_mode=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":v(h),"inactive-icon":v(_)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),m(y,{label:"桌面通知",prop:"notification"},{default:f(()=>[m(s,{modelValue:G.notification,"onUpdate:modelValue":d[1]||(d[1]=e=>G.notification=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":v(h),"inactive-icon":v(_)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),m(y,{label:"自动检查更新",prop:"check_update"},{default:f(()=>[m(s,{modelValue:G.check_update,"onUpdate:modelValue":d[2]||(d[2]=e=>G.check_update=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":v(h),"inactive-icon":v(_)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),m(y,{label:"开机启动",prop:"startup"},{default:f(()=>[m(s,{modelValue:G.startup,"onUpdate:modelValue":d[3]||(d[3]=e=>G.startup=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":v(h),"inactive-icon":v(_)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),m(y,null,{default:f(()=>[r((u(),p(b,{type:"primary",onClick:d[4]||(d[4]=e=>(async()=>{U.value=!0;try{const e=await window.pywebview.api.add_or_update_global_config(G);0!=e.code?n.warning(e.msg||"保存失败"):(n.success(e.msg||"保存成功"),g(G.dark_mode),C.setDarkTheme(G.id,G.dark_mode),G.check_update?T.addInterval("check_update",V,216e5):T.removeInterval("check_update"),I()),U.value=!1}catch(e){n.error(e),U.value=!1}})())},{default:f(()=>[...d[6]||(d[6]=[w("保存",-1)])]),_:1})),[[O,U.value]])]),_:1})]),_:1},8,["model"])]),_:1})),[[O,S.value]])}}});export{j as default};
