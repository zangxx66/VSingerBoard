import{E as e,l as a,v as n}from"./vendor-element-plus-J1ABhGI2.js";import{q as s,ab as l,r,_ as t,K as i,v as o,L as u,bm as d,au as c,aR as g,M as p,t as v,O as h,T as m}from"./vendor-libs-BJ1SQKxe.js";import{u as b}from"./index-PVAVDtve.js";import"./vendor-exceljs-BzIpynsW.js";import{B as f,m as j,H as w}from"./vendor-marked-Con12i8t.js";import"./vendor-vue-aS4A03Y7.js";const _={class:"changelog-container"},L=["innerHTML"],x=s({__name:"Changelog",setup(s){const x=l({version:"",publishedAt:"",changelog:""}),y=r(!1),H=new f(j({emptyLangClass:"hljs",langPrefix:"",highlight(e,a,n){const s=w.getLanguage(a)?a:"plaintext";return w.highlight(e,{language:s}).value}})),M=g("link-icon");return t(()=>{(async()=>{y.value=!0;const a=await window.pywebview.api.update_verion();if(0==a.code){x.version=a.version,x.publishedAt=b(a.published_at);const e=await H.parse(a.body),n=document.createElement("div");d(c(M),n);const s=n.innerHTML;x.changelog=e.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${s}</a>`)}else e.warning("获取更新日志失败");y.value=!1})()}),(e,s)=>{const l=a,r=n;return o(),i(l,null,{header:u(()=>[...s[0]||(s[0]=[h("div",{class:"card-header"},[h("span",null,"更新日志")],-1)])]),default:u(()=>[p((o(),v("div",_,[h("h3",null,m(x.version),1),h("p",null,m(x.publishedAt),1),h("div",{class:"md-content",innerHTML:x.changelog},null,8,L)])),[[r,y.value]])]),_:1})}}});export{x as default};
