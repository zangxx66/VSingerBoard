import{d as e,e as a,f as l,g as s}from"./vendor-element-plus-ChNPy6BA.js";import{_ as n,a as m}from"./fansMedal-Corl4jXz.js";import{p as d}from"./index-BmqyJb8x.js";import"./vendor-exceljs-C-8i3j8b.js";import{z as t}from"./vendor-vue-SbnYag36.js";import{o as r,r as u,O as o,M as i,A as v,B as _,t as c,J as f,C as g,q as p,I as y,ai as k,u as h,y as j,G as b,H as x,E as M,S as H}from"./vendor-libs-Crij45JJ.js";const T={class:"danmaku-list-item"},L={class:"danmaku-sing"},w={class:"danmaku-uname"},A={class:"danmaku-fans"},C=r({__name:"index",setup(r){const C=u(Array()),J=u(null),O=()=>{},S={echo:()=>{},clear:()=>{C.value=[]},remove:e=>{C.value=C.value.filter(a=>a.msg_id!=e)},del:e=>{C.value=C.value.filter(a=>!e.some(e=>e.msg_id===a.msg_id))},add:e=>{C.value=[...C.value,...d(e)]}};return o(C,async()=>{await H(),J.value&&J.value.scrollTo({behavior:"smooth",top:J.value.scrollHeight})}),i(()=>{document.title="点歌列表",t("ws://127.0.0.1:8080",{autoReconnect:!0,autoClose:!0,heartbeat:{message:'{"type":"echo","data":"heartbeat"}',interval:5e3,pongTimeout:1e4},onMessage:(e,a)=>{const l=JSON.parse(a.data),s=S[l.type];s&&s(l.data)}})}),(d,t)=>{const r=l,u=n,o=m,i=a,H=e,S=s;return c(),v(H,{class:"danmaku-container"},{default:_(()=>[f(i,null,{default:_(()=>[g((c(),p("div",{class:"danmaku-list",ref_key:"infiniteList",ref:J},[(c(!0),p(y,null,k(h(C),e=>(c(),p("div",T,[j("div",L,[null!=e.html&&e.html.length>0?(c(),v(r,{key:0,innerHTML:e.html,style:{display:"flex"}},null,8,["innerHTML"])):(c(),p(y,{key:1},[b(x(e.msg),1)],64))]),j("div",w,x(e.uname),1),j("div",A,[e.medal_level>0?(c(),p(y,{key:0},["bilibili"==e.source?(c(),v(u,{key:0,medal_name:e.medal_name,medal_level:e.medal_level,guard_level:e.guard_level},null,8,["medal_name","medal_level","guard_level"])):M("",!0),"douyin"==e.source?(c(),v(o,{key:1,medal_name:e.medal_name,medal_level:e.medal_level,guard_level:e.guard_level},null,8,["medal_name","medal_level","guard_level"])):M("",!0)],64)):M("",!0)])]))),256))])),[[S,O]])]),_:1})]),_:1})}}});export{C as default};
