import{v as e,t as a,u as o,e as t,p as l,l as i,E as n}from"./vendor-element-plus-J1ABhGI2.js";import{q as c,r,ab as d,ax as s,M as u,K as m,v as p,L as f,V as v,u as _,A as h,bP as k,S as g,O as V}from"./vendor-libs-BJ1SQKxe.js";import{r as b}from"./request-DpsVWM9s.js";import{t as j}from"./index-PVAVDtve.js";import{c as w}from"./tool-Dmzci1qF.js";import"./vendor-exceljs-BzIpynsW.js";import{u as y}from"./interval-CRvFp0eB.js";import{u as x}from"./theme-DRkUhqq8.js";import"./vendor-vue-aS4A03Y7.js";const U=c({__name:"appSettingTab",setup(c,{expose:U}){const C=r(),T=r(!1),O=r(!1),S=y(),q=x(),D=d({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1});return s(()=>{const e=q.getDarkTheme();D.dark_mode=e}),U({initConfig:()=>{O.value=!0,b.getGlobalConfig({}).then(e=>{const a=e.data;if(0!=a.code)n.warning(a.msg||"获取失败");else{const e=a.data.data;e&&Object.assign(D,e)}O.value=!1}).catch(e=>{n.error(e),O.value=!1})}}),(c,r)=>{const d=t,s=o,y=l,x=a,U=i,G=e;return u((p(),m(U,null,{header:f(()=>[...r[5]||(r[5]=[V("div",{class:"card-header"},[V("span",null,"应用设置")],-1)])]),default:f(()=>[v(x,{model:D,ref_key:"refForm",ref:C,"label-width":"auto",inline:""},{default:f(()=>[v(s,{label:"黑暗模式",prop:"dark_mode"},{default:f(()=>[v(d,{modelValue:D.dark_mode,"onUpdate:modelValue":r[0]||(r[0]=e=>D.dark_mode=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":_(k),"inactive-icon":_(h)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),v(s,{label:"桌面通知",prop:"notification"},{default:f(()=>[v(d,{modelValue:D.notification,"onUpdate:modelValue":r[1]||(r[1]=e=>D.notification=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":_(k),"inactive-icon":_(h)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),v(s,{label:"自动检查更新",prop:"check_update"},{default:f(()=>[v(d,{modelValue:D.check_update,"onUpdate:modelValue":r[2]||(r[2]=e=>D.check_update=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":_(k),"inactive-icon":_(h)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),v(s,{label:"开机启动",prop:"startup"},{default:f(()=>[v(d,{modelValue:D.startup,"onUpdate:modelValue":r[3]||(r[3]=e=>D.startup=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":_(k),"inactive-icon":_(h)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),v(s,null,{default:f(()=>[u((p(),m(y,{type:"primary",onClick:r[4]||(r[4]=e=>(T.value=!0,void b.addOrUpdateGlobalConfig({data:D}).then(e=>{const a=e.data;0!=a.code?n.warning(a.msg||"保存失败"):(D.id=a.data,n.success(a.msg||"保存成功"),j(D.dark_mode),q.setDarkTheme(D.dark_mode),D.check_update?S.addInterval("check_update",w,216e5):S.removeInterval("check_update")),T.value=!1}).catch(e=>{n.error(e),T.value=!1})))},{default:f(()=>[...r[6]||(r[6]=[g("保存",-1)])]),_:1})),[[G,T.value]])]),_:1})]),_:1},8,["model"])]),_:1})),[[G,O.value]])}}});export{U as default};
