import{Y as e,Z as a,_ as t,$ as l,a0 as s,a1 as n,a2 as o,a3 as r,a4 as i,n as d,a5 as u,a6 as c,e as m,a7 as f,a8 as p,a9 as g,aa as h,ab as _,E as v,d as k}from"./vendor-element-plus-ChNPy6BA.js";import{r as y,e as b,d as w,b as x,f as C,_ as T}from"./index-BmqyJb8x.js";import{o as j,J as R,Y as S,r as N,bg as $,c as E,M as I,aI as D,A as M,t as G,B as H,W as L,u as V,q as A,I as F,ai as O,F as U,G as W,H as Y,E as q,bh as z,f as B,S as J,bf as Z}from"./vendor-libs-Crij45JJ.js";import"./vendor-exceljs-C-8i3j8b.js";import{u as K}from"./theme-qLymyCgz.js";import"./vendor-vue-SbnYag36.js";const P=T(j({__name:"defaultLayout",setup(T){const j=K(),P={shadow:"always"},Q={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},X={offset:70,plain:!0},ee=[{title:"点歌板",icon:R(e,null,null),routerName:"home",ref:"homeRef"},{title:"点歌记录",icon:R(a,null,null),routerName:"history",ref:"historyRef"},{title:"歌单管理",icon:R(t,null,null),routerName:"playlist",ref:"playlistRef"},{title:"更新日志",icon:R(l,null,null),routerName:"changelog"},{title:"设置",icon:R(s,null,null),routerName:"settings",ref:"settingsRef"},{title:"关于",icon:R(n,null,null),routerName:"about"}],ae=S({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1}),te=N(!1),le=N(),se=N(),ne=N(),oe=N(),re=$("mainRef"),ie=()=>{ae.navSideTour=!0,ue(),te.value=!1},de=async()=>{await J(),ae.navSideTour||(ae.navSideTour=!0,ue(),te.value=!1)},ue=()=>{y.addOrUpdateGlobalConfig({data:ae}).then(e=>{const a=e.data;0!=a.code?v.warning(a.msg||"保存失败"):ae.id=a.data}).catch(e=>{v.error(e)})},ce=async e=>{e.preventDefault();const a=window.getSelection()?.toString(),t=document.activeElement,l=t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement;let s=!1;const n=await window.pywebview.api.check_clipboard();n&&n.length>0&&(s=!0);const o=[{label:"拷贝",disabled:!a,onClick:()=>{a&&(x(a),v.success("拷贝成功"))}},{label:"粘贴",disabled:!l||!s,onClick:()=>{C(t)}}];Z.showContextMenu({x:e.x,y:e.y,theme:ge.value?"mac dark":"mac",zIndex:100,minWidth:230,items:o})},me=()=>{ae.dark_mode=!ae.dark_mode,ue(),w(ae.dark_mode),j.setDarkTheme(ae.dark_mode)},fe=E(()=>({left:ae.collapse?"64px":"200px"})),pe=E(()=>({width:ae.collapse?"64px":"200px"})),ge=E(()=>j.getDarkTheme());return I(()=>{setTimeout(()=>{(async()=>{y.getGlobalConfig({}).then(e=>{const a=e.data;if(0!=a.code)v.warning(a.msg);else{const e=a.data.data;e?(Object.assign(ae,e),w(e.dark_mode),j.setDarkTheme(e.dark_mode),e.navSideTour||(te.value=!0)):te.value=!0}}).catch(e=>{v.error(e)})})()},1e3)}),(e,a)=>{const t=d,l=i,s=r,n=o,v=D("router-view"),y=g,w=_,x=h,C=f,T=m,j=k;return G(),M(j,{class:"layout-container-demo"},{default:H(()=>[R(n,{style:L(V(pe))},{default:H(()=>[R(s,{"default-active":"0",collapse:V(ae).collapse,class:"layout-aside-menu"},{default:H(()=>[(G(),A(F,null,O(ee,(e,a)=>R(l,{index:`${a}`,onClick:a=>(e=>{if(b.currentRoute.value.name==e)return ae.collapse=!ae.collapse,void ue();b.push({name:e})})(e.routerName),ref_for:!0,ref:e.ref||void 0},{title:H(()=>[W(Y(e.title),1)]),default:H(()=>[R(t,null,{default:H(()=>[(G(),M(U(e.icon)))]),_:2},1024)]),_:2},1032,["index","onClick"])),64)),R(l,{ref_key:"themeRef",ref:oe,onClick:me},{default:H(()=>[V(ge)?q("",!0):(G(),M(t,{key:0},{default:H(()=>[R(V(u))]),_:1})),V(ge)?(G(),M(t,{key:1},{default:H(()=>[R(V(c))]),_:1})):q("",!0)]),_:1},512)]),_:1},8,["collapse"])]),_:1},8,["style"]),R(T,{onContextmenu:ce,style:L(V(fe)),ref_key:"mainRef",ref:re},{default:H(()=>[R(C,{locale:V(p),card:P,dialog:Q,message:X},{default:H(()=>[R(v,null,{default:H(({Component:e})=>[(G(),M(z,{include:["home"]},[(G(),M(U(e)))],1024))]),_:1}),R(y,{right:100,bottom:100}),R(x,{modelValue:V(te),"onUpdate:modelValue":a[0]||(a[0]=e=>B(te)?te.value=e:null),onClose:de,onFinish:ie,"target-area-clickable":!1,"close-on-press-escape":!1},{default:H(()=>[R(w,{title:"提示",description:"欢迎使用点歌姬"}),R(w,{title:"提示",description:"这里是点歌，可以查看抖和破站的点歌列表",placement:"right",target:V(le)?.$el},null,8,["target"]),R(w,{title:"提示",description:"这里是历史记录，可以查看历史点歌",placement:"right",target:V(se)?.$el},null,8,["target"]),R(w,{title:"提示",description:"这里是设置，可以设置抖和破站的直播间监听",placement:"right",target:V(ne)?.$el},null,8,["target"]),R(w,{title:"提示",description:"这是主题开关，可以切换主题",placement:"right",target:V(oe)?.$el},null,8,["target"]),R(w,{title:"提示",description:"这里是主界面",placement:"left",target:V(re)?.$el},null,8,["target"])]),_:1},8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-3a943775"]]);export{P as default};
