import{d as y,r as p,b as x,o as F,e as f,f as u,w as l,k as n,y as c,aq as _,bw as k,m as B,aK as U,u as G,aI as N,A as g,h as v,E as r,bx as q}from"./index-BURHvijj.js";/* empty css                   */import{E as D}from"./el-card-z_8omyjg.js";import{E as I,a as L}from"./el-form-item-BFfzxSwx.js";/* empty css                  */import{E as M}from"./index-DaxBxX2c.js";import"./Settings-DviB6QJo.js";import"./toNumber-9gyJ14Iw.js";const J=y({__name:"appSettingTab",setup(O){const b=p(),d=p(!1),a=x({id:0,dark_mode:!1,check_update:!1,startup:!1}),m=()=>{v.getGlobalConfig({}).then(o=>{const e=o.data;if(e.code!=0)r.warning(e.msg||"获取失败");else{const s=e.data.data;if(s){const t=s;a.id=t.id,a.dark_mode=t.dark_mode,a.check_update=t.check_update,a.startup=t.startup}}}).catch(o=>{r.error(o),console.error("getGlobalConfig",o)})},h=()=>{d.value=!0,v.addOrUpdateGlobalConfig({data:a}).then(o=>{const e=o.data;e.code!=0?r.warning(e.msg||"保存失败"):(r.success(e.msg||"保存成功"),q(a.dark_mode),m()),d.value=!1}).catch(o=>{r.error(o),d.value=!1})};return F(()=>{m()}),(o,e)=>{const s=M,t=L,w=U,E=I,V=D,C=N;return u(),f(V,null,{header:l(()=>[...e[3]||(e[3]=[g("div",{class:"card-header"},[g("span",null,"应用设置")],-1)])]),default:l(()=>[n(E,{model:a,ref_key:"refForm",ref:b,"label-width":"auto"},{default:l(()=>[n(t,{label:"黑暗模式",prop:"dark_mode"},{default:l(()=>[n(s,{modelValue:a.dark_mode,"onUpdate:modelValue":e[0]||(e[0]=i=>a.dark_mode=i),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":c(k),"inactive-icon":c(_)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),n(t,{label:"自动检查更新",prop:"check_update"},{default:l(()=>[n(s,{modelValue:a.check_update,"onUpdate:modelValue":e[1]||(e[1]=i=>a.check_update=i),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":c(k),"inactive-icon":c(_)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),n(t,null,{default:l(()=>[B((u(),f(w,{type:"primary",onClick:e[2]||(e[2]=i=>h())},{default:l(()=>[...e[4]||(e[4]=[G("保存",-1)])]),_:1})),[[C,d.value]])]),_:1})]),_:1},8,["model"])]),_:1})}}});export{J as default};
