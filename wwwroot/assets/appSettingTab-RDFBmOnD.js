const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/obsSetting-Ccj_9SQf.js","assets/vendor-element-plus-CAbZ6VM0.js","assets/vendor-libs-DUytVOgY.js","assets/vendor-exceljs-BzIpynsW.js","assets/vendor-libs-CtmmCz1m.css","assets/vendor-element-plus-B-fPOo-g.css","assets/index-76T0Z4m6.js","assets/vendor-vue-BEIf0qVf.js","assets/index-C0imaPs4.css"])))=>i.map(i=>d[i]);
import{_ as e,t as a,c as o}from"./index-76T0Z4m6.js";import{v as t,u as l,w as i,f as n,q as s,m as c,G as d,a as r}from"./vendor-element-plus-CAbZ6VM0.js";import{q as u,r as m,ab as p,aA as f,t as v,v as _,M as h,V as k,K as b,L as g,u as V,A as j,bS as w,S as y,O as U,bP as S,U as T}from"./vendor-libs-DUytVOgY.js";import{r as x}from"./request-C2d-pRYf.js";import"./vendor-exceljs-BzIpynsW.js";import{u as C}from"./interval-pHlrBWSF.js";import{u as O}from"./theme-Dou73O16.js";import"./vendor-vue-BEIf0qVf.js";const q=u({__name:"appSettingTab",setup(u,{expose:q}){const A=S(()=>e(()=>import("./obsSetting-Ccj_9SQf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),D=m(),G=m(!1),I=m(!1),E=C(),L=O(),P=p({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1});return f(()=>{const e=L.getDarkTheme();P.dark_mode=e}),q({initConfig:()=>{I.value=!0,x.getGlobalConfig({}).then(e=>{const a=e.data;if(0!=a.code)r.warning(a.msg||"获取失败");else{const e=a.data.data;e&&Object.assign(P,e)}I.value=!1}).catch(e=>{r.error(e),I.value=!1})}}),(e,u)=>{const m=n,p=i,f=s,S=l,C=c,O=d,q=t;return _(),v(T,null,[h((_(),b(C,null,{header:g(()=>[...u[5]||(u[5]=[U("div",{class:"card-header"},[U("span",null,"应用设置")],-1)])]),default:g(()=>[k(S,{model:P,ref_key:"refForm",ref:D,"label-width":"auto",inline:""},{default:g(()=>[k(p,{label:"黑暗模式",prop:"dark_mode"},{default:g(()=>[k(m,{modelValue:P.dark_mode,"onUpdate:modelValue":u[0]||(u[0]=e=>P.dark_mode=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":V(w),"inactive-icon":V(j)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),k(p,{label:"桌面通知",prop:"notification"},{default:g(()=>[k(m,{modelValue:P.notification,"onUpdate:modelValue":u[1]||(u[1]=e=>P.notification=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":V(w),"inactive-icon":V(j)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),k(p,{label:"自动检查更新",prop:"check_update"},{default:g(()=>[k(m,{modelValue:P.check_update,"onUpdate:modelValue":u[2]||(u[2]=e=>P.check_update=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":V(w),"inactive-icon":V(j)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),k(p,{label:"开机启动",prop:"startup"},{default:g(()=>[k(m,{modelValue:P.startup,"onUpdate:modelValue":u[3]||(u[3]=e=>P.startup=e),"inline-prompt":"",style:{"--el-switch-off-color":"#ff4949"},"active-icon":V(w),"inactive-icon":V(j)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),k(p,null,{default:g(()=>[h((_(),b(f,{type:"primary",onClick:u[4]||(u[4]=e=>(G.value=!0,void x.addOrUpdateGlobalConfig({data:P}).then(e=>{const t=e.data;0!=t.code?r.warning(t.msg||"保存失败"):(P.id=t.data,r.success(t.msg||"保存成功"),a(P.dark_mode),L.setDarkTheme(P.dark_mode),P.check_update?E.addInterval("check_update",o,216e5):E.removeInterval("check_update")),G.value=!1}).catch(e=>{r.error(e),G.value=!1})))},{default:g(()=>[...u[6]||(u[6]=[y("保存",-1)])]),_:1})),[[q,G.value]])]),_:1})]),_:1},8,["model"])]),_:1})),[[q,I.value]]),k(O),k(V(A))],64)}}});export{q as default};
