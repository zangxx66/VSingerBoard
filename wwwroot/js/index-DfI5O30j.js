import{E as a,n as e,v as s}from"./vendor-element-plus-CjYS7DoP.js";import{_ as n}from"./link-icon-Bg6UfiWU.js";import{o as r,a2 as t,r as o,W as l,t as i,E as c,b0 as d,ar as g,v as m,F as h,y as p,z as u,K as v,u as f}from"./vendor-libs-Kq5ll9xE.js";import{B as j,m as b}from"./vendor-marked-BA71NfC7.js";import{H as _}from"./vendor-highlight-js-DhZgkat3.js";import{r as x}from"./api-BnBC17YJ.js";import{u as L}from"./times-CDnvQ87d.js";import"./vendor-vue-QPsD10U7.js";import"./vendor-exceljs-C-8i3j8b.js";const k={class:"changelog-container"},w=["innerHTML"],y=r({name:"changelog",__name:"index",setup(r){const y=t({version:"",publishedAt:"",changelog:""}),H=o(!1),A=new j(b({emptyLangClass:"hljs",langPrefix:"",highlight(a,e,s){const n=_.getLanguage(e)?e:"plaintext";return _.highlight(a,{language:n}).value}})),E=n;return l(()=>{(async()=>{H.value=!0;const e=await x.checkUpdate({});if(0==e.code){const a=e.data;y.version=a.version,y.publishedAt=L(a.published_at);const s=await A.parse(a.body),n=document.createElement("div");d(g(E),n);const r=n.innerHTML;y.changelog=s.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${r}</a>`)}else a.warning("获取更新日志失败");H.value=!1})()}),(a,n)=>{const r=e,t=s;return m(),i(r,null,{header:c(()=>[...n[0]||(n[0]=[u("div",{class:"card-header"},[u("span",null,"更新日志")],-1)])]),default:c(()=>[h((m(),p("div",k,[u("h3",null,v(f(y).version),1),u("p",null,v(f(y).publishedAt),1),u("div",{class:"md-content",innerHTML:f(y).changelog},null,8,w)])),[[t,f(H)]])]),_:1})}}});export{y as default};
