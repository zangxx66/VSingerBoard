import{z as e,o as a,p as l}from"./vendor-element-plus-CjYS7DoP.js";import{_ as s,a as m}from"./fans-medal-CsE8w-96.js";import{w as n}from"./vendor-vue-QPsD10U7.js";import{p as t}from"./api-BnBC17YJ.js";import{o as d,r as o,V as r,W as u,t as i,E as v,v as _,M as c,y as p,L as f,ap as g,u as y,z as k,J as h,K as j,H as b,Z as x}from"./vendor-libs-Kq5ll9xE.js";import"./vendor-exceljs-C-8i3j8b.js";const H={class:"danmaku-list-item"},L={class:"danmaku-sing"},M={class:"danmaku-uname"},T={class:"danmaku-fans"},w=d({name:"danmaku",__name:"index",setup(d){const w=o(Array()),z=o(),J={echo:()=>{},clear:()=>{w.value=[]},remove:e=>{w.value=w.value.filter(a=>a.msg_id!=e)},del:e=>{w.value=w.value.filter(a=>!e.some(e=>e.msg_id===a.msg_id))},add:e=>{w.value=[...w.value,...t(e)]}};return r(w,async()=>{await x(),z.value&&z.value.scrollTo({behavior:"smooth",top:z.value.$el.scrollHeight})}),u(()=>{document.title="点歌列表",n("ws://127.0.0.1:8080",{autoReconnect:!0,autoClose:!0,heartbeat:{message:'{"type":"echo","data":"heartbeat"}',interval:5e3,pongTimeout:1e4},onMessage:(e,a)=>{const l=JSON.parse(a.data),s=J[l.type];s&&s(l.data)}})}),(n,t)=>{const d=l,o=s,r=m,u=a,x=e;return _(),i(x,{class:"danmaku-container"},{default:v(()=>[c(u,{class:"danmaku-list",ref_key:"infiniteList",ref:z},{default:v(()=>[(_(!0),p(f,null,g(y(w),e=>(_(),p("div",H,[k("div",L,[null!=e.html&&e.html.length>0?(_(),i(d,{key:0,innerHTML:e.html,style:{display:"flex"}},null,8,["innerHTML"])):(_(),p(f,{key:1},[h(j(e.msg),1)],64))]),k("div",M,j(e.uname),1),k("div",T,[e.medal_level>0?(_(),p(f,{key:0},["bilibili"==e.source?(_(),i(o,{key:0,medal_name:e.medal_name,medal_level:e.medal_level,guard_level:e.guard_level},null,8,["medal_name","medal_level","guard_level"])):b("",!0),"douyin"==e.source?(_(),i(r,{key:1,medal_name:e.medal_name,medal_level:e.medal_level,guard_level:e.guard_level},null,8,["medal_name","medal_level","guard_level"])):b("",!0)],64)):b("",!0)])]))),256))]),_:1},512)]),_:1})}}}),z={};"function"==typeof z&&z(w);export{w as default};
