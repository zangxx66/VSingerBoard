import{E as a,m as e,v as s}from"./vendor-element-plus-BNN58Tgt.js";import{_ as n}from"./link-icon-sufAlEF8.js";import{bb as r,n as t,q as o,D as i,t as l,E as m,x as u,y as c,J as d,u as g,a$ as p,aq as h}from"./vendor-libs-DLrArELd.js";import{B as v,m as f}from"./vendor-marked-BA71NfC7.js";import{H as j}from"./vendor-highlight-js-DhZgkat3.js";import{c as b}from"./request-BRje5s3q.js";import{g as y,u as _}from"./times-X7rBhlB4.js";import{w as x}from"./vendor-vue-D3OeNkI5.js";import{b as k}from"./tool-7CWFlNCe.js";import{b as q}from"./route-block-B_A1xBdJ.js";import"./vendor-exceljs-C-8i3j8b.js";const w={class:"changelog-container"},L={class:"md-content"},H=["innerHTML"],E=t({name:"changelog",__name:"index",setup(t){const q=new v(f({emptyLangClass:"hljs",langPrefix:"",highlight(a,e,s){const n=j.getLanguage(e)?e:"plaintext";return j.highlight(a,{language:n}).value}})),E=n,{data:M,isFetching:T}=r({queryKey:[b.name],queryFn:async()=>{const e=await b({});return 0!=e.code?(a.warning(e.msg||"请求失败"),{code:-2,version:"",url:"",body:"",published_at:y(),msg:e.msg||"请求失败"}):e.data}}),F=x(async()=>{if(-2==M.value?.code)return M.value;{const a={};Object.assign(a,M.value),a.published_at=_(a.published_at);const e=await q.parse(a.body),s=document.createElement("div");p(h(E),s);const n=s.innerHTML,r=e.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${n}</a>`);return a.msg=k(r),a}});return(a,n)=>{const r=e,t=s;return l(),o(r,null,{header:i(()=>[...n[0]||(n[0]=[c("div",{class:"card-header"},[c("span",null,"更新日志")],-1)])]),default:i(()=>[m((l(),u("div",w,[c("h3",null,d(g(F)?.version),1),c("p",null,d(g(F)?.published_at),1),c("div",L,[c("div",{innerHTML:g(F)?.msg},null,8,H)])])),[[t,g(T)]])]),_:1})}}});"function"==typeof q&&q(E);export{E as default};
