import{Y as e,Z as a,_ as t,$ as l,a0 as s,a1 as n,a2 as o,a3 as r,a4 as i,n as d,a5 as u,a6 as c,e as m,a7 as f,a8 as p,a9 as g,aa as h,ab as _,E as v,d as k}from"./vendor-element-plus-DfIrH9Kr.js";import{n as y,L as b,a1 as w,r as x,bf as C,c as T,V as j,am as S,q as $,t as N,D as R,$ as D,u as E,x as I,K as L,ao as V,H as G,I as H,J as M,G as O,O as U,bg as Y,a as q,Y as z,be as A}from"./vendor-libs-DGcKXZQv.js";import{r as B,d as F,b as J,e as K,_ as W}from"./index-CqzKlsTq.js";import"./vendor-exceljs-C-8i3j8b.js";import{u as Z}from"./theme-D58fi9SQ.js";import{B as P,C as Q}from"./vendor-vue-lxJqvpcP.js";const X=W(y({__name:"defaultLayout",setup(y){const W=Z(),X=P(),ee=Q(),ae={shadow:"always"},te={alignCenter:!0,draggable:!0,overflow:!1,transition:"el-fade-in"},le={offset:70,plain:!0},se=[{title:"点歌板",icon:b(e,null,null),routerName:"home",ref:"homeRef"},{title:"点歌记录",icon:b(a,null,null),routerName:"history",ref:"historyRef"},{title:"歌单管理",icon:b(t,null,null),routerName:"playlist",ref:"playlistRef"},{title:"更新日志",icon:b(l,null,null),routerName:"changelog"},{title:"设置",icon:b(s,null,null),routerName:"settings",ref:"settingsRef"},{title:"关于",icon:b(n,null,null),routerName:"about"}],ne=w({id:0,dark_mode:!1,check_update:!1,startup:!1,notification:!1,navSideTour:!1,collapse:!1}),oe=x(!1),re=x(),ie=x(),de=x(),ue=x(),ce=C("mainRef"),me=()=>{ne.navSideTour=!0,pe(),oe.value=!1},fe=async()=>{await z(),ne.navSideTour||(ne.navSideTour=!0,pe(),oe.value=!1)},pe=()=>{B.addOrUpdateGlobalConfig({data:ne}).then(e=>{const a=e.data;0!=a.code?v.warning(a.msg||"保存失败"):ne.id=a.data}).catch(e=>{v.error(e)})},ge=async e=>{e.preventDefault();const a=window.getSelection()?.toString(),t=document.activeElement,l=t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement;let s=!1;const n=await window.pywebview.api.check_clipboard();n&&n.length>0&&(s=!0);const o=[{label:"拷贝",disabled:!a,onClick:()=>{a&&(J(a),v.success("拷贝成功"))}},{label:"粘贴",disabled:!l||!s,onClick:()=>{K(t)}}];A.showContextMenu({x:e.x,y:e.y,theme:ke.value?"mac dark":"mac",zIndex:9999,minWidth:230,items:o})},he=()=>{ne.dark_mode=!ne.dark_mode,pe(),F(ne.dark_mode),W.setDarkTheme(ne.dark_mode)},_e=T(()=>({left:ne.collapse?"64px":"200px"})),ve=T(()=>({width:ne.collapse?"64px":"200px"})),ke=T(()=>W.getDarkTheme());return j(()=>{setTimeout(()=>{(async()=>{B.getGlobalConfig({}).then(e=>{const a=e.data;if(0!=a.code)v.warning(a.msg);else{const e=a.data.data;e?(Object.assign(ne,e),F(e.dark_mode),W.setDarkTheme(e.dark_mode),e.navSideTour||(oe.value=!0)):oe.value=!0}}).catch(e=>{v.error(e)})})()},1e3)}),(e,a)=>{const t=d,l=i,s=r,n=o,v=S("router-view"),y=g,w=_,x=h,C=f,T=m,j=k;return N(),$(j,{class:"layout-container-demo"},{default:R(()=>[b(n,{style:D(E(ve))},{default:R(()=>[b(s,{"default-active":"0",collapse:E(ne).collapse,class:"layout-aside-menu"},{default:R(()=>[(N(),I(L,null,V(se,(e,a)=>b(l,{index:`${a}`,onClick:a=>(e=>{if(X.name?.toString()==e)return ne.collapse=!ne.collapse,void pe();ee.push({name:e})})(e.routerName),ref_for:!0,ref:e.ref||void 0},{title:R(()=>[H(M(e.title),1)]),default:R(()=>[b(t,null,{default:R(()=>[(N(),$(G(e.icon)))]),_:2},1024)]),_:2},1032,["index","onClick"])),64)),b(l,{ref_key:"themeRef",ref:ue,onClick:he},{default:R(()=>[E(ke)?O("",!0):(N(),$(t,{key:0},{default:R(()=>[b(E(u))]),_:1})),E(ke)?(N(),$(t,{key:1},{default:R(()=>[b(E(c))]),_:1})):O("",!0)]),_:1},512)]),_:1},8,["collapse"])]),_:1},8,["style"]),b(T,{onContextmenu:ge,style:D(E(_e)),ref_key:"mainRef",ref:ce},{default:R(()=>[b(C,{locale:E(p),card:ae,dialog:te,message:le},{default:R(()=>[b(v,null,{default:R(({Component:e})=>[b(U,{name:"fade"},{default:R(()=>[(N(),$(Y,{include:["home"]},[(N(),$(G(e)))],1024))]),_:2},1024)]),_:1}),b(y,{right:100,bottom:100}),b(x,{modelValue:E(oe),"onUpdate:modelValue":a[0]||(a[0]=e=>q(oe)?oe.value=e:null),onClose:fe,onFinish:me,"target-area-clickable":!1,"close-on-press-escape":!1},{default:R(()=>[b(w,{title:"提示",description:"欢迎使用点歌姬"}),b(w,{title:"提示",description:"这里是点歌，可以查看抖和破站的点歌列表",placement:"right",target:E(re)?.$el},null,8,["target"]),b(w,{title:"提示",description:"这里是历史记录，可以查看历史点歌",placement:"right",target:E(ie)?.$el},null,8,["target"]),b(w,{title:"提示",description:"这里是设置，可以设置抖和破站的直播间监听",placement:"right",target:E(de)?.$el},null,8,["target"]),b(w,{title:"提示",description:"这是主题开关，可以切换主题",placement:"right",target:E(ue)?.$el},null,8,["target"]),b(w,{title:"提示",description:"这里是主界面",placement:"left",target:E(ce)?.$el},null,8,["target"])]),_:1},8,["modelValue"])]),_:1},8,["locale"])]),_:1},8,["style"])]),_:1})}}}),[["__scopeId","data-v-ad10820c"]]);export{X as default};
