import{v as a,u as e,E as s}from"./vendor-element-plus-C1FTue0a.js";import{_ as n}from"./linkIcon-BtDKMFhS.js";import{n as r,a1 as t,r as l,V as o,q as i,D as c,E as d,u as g,x as h,y as u,J as p,b1 as m,aq as v,t as f}from"./vendor-libs-HLQpMz2o.js";import{r as j,a as b}from"./index-VsYnm2nK.js";import"./vendor-exceljs-C-8i3j8b.js";import{B as x,m as L}from"./vendor-marked-BA71NfC7.js";import{H as k}from"./vendor-highlight-js-DhZgkat3.js";import"./vendor-vue-J6GVTi4e.js";const w={class:"changelog-container"},y=["innerHTML"],H=r({name:"changelog",setup(r){const H=t({version:"",publishedAt:"",changelog:""}),_=l(!1),A=new x(L({emptyLangClass:"hljs",langPrefix:"",highlight(a,e,s){const n=k.getLanguage(e)?e:"plaintext";return k.highlight(a,{language:n}).value}})),E=n;return o(()=>{(async()=>{_.value=!0;const a=await j.checkUpdate({});if(0==a.data.code){const e=a.data.data;H.version=e.version,H.publishedAt=b(e.published_at);const s=await A.parse(e.body),n=document.createElement("div");m(v(E),n);const r=n.innerHTML;H.changelog=s.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${r}</a>`)}else s.warning("获取更新日志失败");_.value=!1})()}),(s,n)=>{const r=e,t=a;return f(),i(r,null,{header:c(()=>[...n[0]||(n[0]=[u("div",{class:"card-header"},[u("span",null,"更新日志")],-1)])]),default:c(()=>[d((f(),h("div",w,[u("h3",null,p(g(H).version),1),u("p",null,p(g(H).publishedAt),1),u("div",{class:"md-content",innerHTML:g(H).changelog},null,8,y)])),[[t,g(_)]])]),_:1})}}});export{H as default};
