import{E as e,v as a,m as s}from"./vendor-element-plus-HZbGYrKl.js";import{_ as t}from"./line-header.vue_vue_type_script_setup_true_lang-Be3zGABY.js";import{_ as r}from"./link-icon-BIizdxOZ.js";import{bb as n,n as o,q as i,t as l,D as m,E as u,x as c,y as d,J as g,u as p,L as h,a$ as v,aq as f}from"./vendor-libs-7289s0cb.js";import{B as j,m as _}from"./vendor-marked-BA71NfC7.js";import{H as b}from"./vendor-highlight-js-DhZgkat3.js";import{c as y}from"./request-BsWu63JD.js";import{g as x,u as L}from"./times-Cw5rdMqO.js";import{x as k}from"./vendor-vue-Cl2YAQzn.js";import{b as q}from"./tool-uNj5llJ9.js";import{b as w}from"./route-block-B_A1xBdJ.js";import"./vendor-exceljs-C-8i3j8b.js";const H={class:"card-header"},E={class:"changelog-container"},M={class:"md-content"},T=["innerHTML"],F=o({name:"changelog",__name:"index",setup(o){const w=new j(_({emptyLangClass:"hljs",langPrefix:"",highlight(e,a,s){const t=b.getLanguage(a)?a:"plaintext";return b.highlight(e,{language:t}).value}})),F=r,{data:$,isFetching:C}=n({queryKey:[y.name],queryFn:async()=>{const a=await y({});return 0!=a.code?(e.warning(a.msg||"请求失败"),{code:-2,version:"",url:"",body:"",published_at:x(),msg:a.msg||"请求失败"}):a.data}}),D=k(async()=>{if(-2==$.value?.code)return $.value;{const e={};Object.assign(e,$.value),e.published_at=L(e.published_at);const a=await w.parse(e.body),s=document.createElement("div");v(f(F),s);const t=s.innerHTML,r=a.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${t}</a>`);return e.msg=q(r),e}});return(e,r)=>{const n=t,o=s,v=a;return l(),i(o,null,{header:m(()=>[d("div",H,[h(n,{class:"items-center flex",title:"更新日志"})])]),default:m(()=>[u((l(),c("div",E,[d("h3",null,g(p(D)?.version),1),d("p",null,g(p(D)?.published_at),1),d("div",M,[d("div",{innerHTML:p(D)?.msg},null,8,T)])])),[[v,p(C)]])]),_:1})}}});"function"==typeof w&&w(F);export{F as default};
