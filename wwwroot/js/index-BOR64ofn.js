import{E as a,b as e,v as s}from"./vendor-element-plus-DfIrH9Kr.js";import{_ as n}from"./linkIcon-vRSSnZTi.js";import{n as r,a1 as t,r as l,V as o,q as i,D as d,b1 as c,aq as g,t as u,E as h,x as p,y as m,J as v,u as f}from"./vendor-libs-DGcKXZQv.js";import{r as j,u as b}from"./index-CqzKlsTq.js";import"./vendor-exceljs-C-8i3j8b.js";import{B as x,m as _}from"./vendor-marked-BA71NfC7.js";import{H as L}from"./vendor-highlight-js-DhZgkat3.js";import"./vendor-vue-lxJqvpcP.js";const k={class:"changelog-container"},w=["innerHTML"],y=r({__name:"index",setup(r){const y=t({version:"",publishedAt:"",changelog:""}),H=l(!1),A=new x(_({emptyLangClass:"hljs",langPrefix:"",highlight(a,e,s){const n=L.getLanguage(e)?e:"plaintext";return L.highlight(a,{language:n}).value}})),E=n;return o(()=>{(async()=>{H.value=!0;const e=await j.checkUpdate({});if(0==e.data.code){const a=e.data.data;y.version=a.version,y.publishedAt=b(a.published_at);const s=await A.parse(a.body),n=document.createElement("div");c(g(E),n);const r=n.innerHTML;y.changelog=s.replace(/<a href/g,'<a target="_blank" href').replace(/<\/a>/g,`${r}</a>`)}else a.warning("获取更新日志失败");H.value=!1})()}),(a,n)=>{const r=e,t=s;return u(),i(r,null,{header:d(()=>[...n[0]||(n[0]=[m("div",{class:"card-header"},[m("span",null,"更新日志")],-1)])]),default:d(()=>[h((u(),p("div",k,[m("h3",null,v(f(y).version),1),m("p",null,v(f(y).publishedAt),1),m("div",{class:"md-content",innerHTML:f(y).changelog},null,8,w)])),[[t,f(H)]])]),_:1})}}});export{y as default};
